import q from"./dict-edit-aa93f94a.js";import z from"./dict-type-edit-857f9a8d.js";import{g as F,r as f,o as G,y as J,a as i,v as K,b as r,c as m,w as a,d as e,i as c,u as s,k as D,e as P,m as Q,n as w,x as W}from"./index-5dc5873c.js";const X={class:"flex-1 p-x-10"},Y={key:1},ne={__name:"dict",setup(Z){const{proxy:o}=F();let b=f(!1),y=f([]),p=f([]),n=f(null),$=f(!1);G(()=>{v()});const x=J(()=>{const t=document.documentElement.clientHeight;return Math.abs(t-400)});async function v(){let t=await o.$api.sys_dict_type.list();y.value=t.body.records,n.value=null,p.value=[],b.value=!1}function C(t){n.value=t,g(n.value),b.value=!0}async function g(t){let l=await o.$api.sys_dict.listByCode({code:t.code});p.value=l.body}function T(){if(!n.value.name){o.$message.warning("请先选中要添加的字典类型");return}var t=1;p.value.length>0&&(t=Math.max(...p.value.map(l=>l.sort))+1),o.$refs.editDictRef.open("add",null,n.value.id,n.value.code,t)}function B(t){o.$refs.editDictRef.open("update",t)}async function S(t){let l=await o.$api.sys_dict.delete(t);o.submitOk(l.msg),g(n.value)}function V(){o.$refs.editDictTypeRef.open("add")}function N(t){o.$refs.editDictTypeRef.open("update",t)}function R(){if(!n.value.name){o.$message.warning("请先选中要删除的字典类型");return}o.$confirm("确定删除数据字典?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{let t=await o.$api.sys_dict_type.delete(n.value.id);o.submitOk(t.msg),v()})}return(t,l)=>{const _=i("el-button"),O=i("el-tree"),k=i("base-card"),H=i("base-no-data"),h=i("base-cell-item"),L=i("base-tag"),M=i("base-cell"),u=i("el-table-column"),E=i("base-delete-btn"),A=i("base-table"),I=i("base-wrapper"),U=K("loading");return r(),m(I,{class:"flex"},{default:a(()=>[e(k,{title:"字典类型"},{append:a(()=>[e(_,{type:"success",onClick:V},{default:a(()=>[c("添加")]),_:1})]),default:a(()=>[s(y).length>0?(r(),m(O,{key:0,props:{children:"children",label:"name"},data:s(y),"highlight-current":"",onNodeClick:C},null,8,["data"])):D("",!0)]),_:1}),P("div",X,[s(n)?(r(),Q("div",Y,[e(k,{title:"字典类型信息"},{append:a(()=>[e(_,{type:"primary",onClick:l[0]||(l[0]=d=>N(s(n)))},{default:a(()=>[c("编辑 ")]),_:1}),e(_,{type:"danger",onClick:R},{default:a(()=>[c("删除")]),_:1})]),default:a(()=>[e(M,{"label-width":"120px"},{default:a(()=>[e(h,{label:"字典类型名称"},{default:a(()=>[c(w(s(n).name),1)]),_:1}),e(h,{label:"字典类型编码"},{default:a(()=>[c(w(s(n).code),1)]),_:1}),e(h,{label:"字典类型状态"},{default:a(()=>[e(L,{modelValue:s(n).status,"onUpdate:modelValue":l[1]||(l[1]=d=>s(n).status=d)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(k,{title:"字典列表",class:"m-t-10"},{append:a(()=>[s(b)?(r(),m(_,{key:0,type:"success",onClick:T},{default:a(()=>[c("添加")]),_:1})):D("",!0)]),default:a(()=>[W((r(),m(A,{data:s(p),height:s(x)},{default:a(()=>[e(u,{prop:"id",label:"序号"}),e(u,{prop:"name",label:"字典名称"}),e(u,{prop:"value",label:"字典值"}),e(u,{prop:"sort",label:"排序"}),e(u,{prop:"remark",label:"备注"}),e(u,{label:"操作",width:"150"},{default:a(d=>[e(_,{link:"",onClick:j=>B(d.row)},{default:a(()=>[c("编辑")]),_:2},1032,["onClick"]),e(E,{onOk:j=>S(d.row.id)},null,8,["onOk"])]),_:1})]),_:1},8,["data","height"])),[[U,s($),void 0,{body:!0}]])]),_:1})])):(r(),m(H,{key:0,style:{height:"200px"}},{default:a(()=>[c("点击左侧数据查看")]),_:1}))]),e(q,{ref:"editDictRef",onSaveSucc:l[2]||(l[2]=d=>g(s(n)))},null,512),e(z,{ref:"editDictTypeRef",onSaveSucc:l[3]||(l[3]=d=>v())},null,512)]),_:1})}}};export{ne as default};
