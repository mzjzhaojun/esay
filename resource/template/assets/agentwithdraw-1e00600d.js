import{g as J,r as y,a as n,b as m,c as i,w as l,d as a,u as o,i as c,n as v,k as _,e as h,m as $,j as B,F as K,q as P}from"./index-5dc5873c.js";const W=["src"],X={style:{width:"300px"}},ae={__name:"agentwithdraw",setup(Y){const{proxy:p}=J();let O=p.$store.user.useUserStore();const{userObj:R}=O;let s=y({}),r=y(!1),b=y(""),f=y({userid:R.id,type:21}),U=y([]);function g(){p.$refs.baseTableRef.refresh()}function F(){L(),b.value="add",r.value=!0}async function L(){let d=await p.$api.agentaccount.bank();U.value=d.body.listbanks,s.value={totalincome:d.body.totalincome}}async function T(d){let t=await p.$api.agentaccountorder.canclewithdraw(d.id);p.submitOk(t.message),g()}function N(){p.$refs.dataFormRef.validate(async d=>{if(d){s.value.id=null;let t=await p.$api.agentaccountorder.withdraw(s.value);p.submitOk(t.message),g(),r.value=!1}})}return(d,t)=>{const S=n("base-input"),x=n("el-col"),j=n("base-select-no"),k=n("el-button"),D=n("el-row"),q=n("base-header"),u=n("el-table-column"),C=n("el-tag"),A=n("base-confirm-btn"),E=n("base-table-p"),I=n("base-content"),M=n("el-option"),Q=n("el-select"),w=n("el-form-item"),V=n("base-input-no"),z=n("el-form"),G=n("base-dialog"),H=n("base-wrapper");return m(),i(H,null,{default:l(()=>[a(q,null,{default:l(()=>[a(D,null,{default:l(()=>[a(x,{span:4.5},{default:l(()=>[a(S,{modelValue:o(f).nikname,"onUpdate:modelValue":t[0]||(t[0]=e=>o(f).nikname=e),label:"充值金额",onClear:g},null,8,["modelValue"])]),_:1}),a(x,{span:4.5},{default:l(()=>[a(j,{modelValue:o(f).status,"onUpdate:modelValue":t[1]||(t[1]=e=>o(f).status=e),label:"状态","tag-type":"success",onClear:g,style:{"margin-right":"10px"},clearable:"","option-props":{label:"name",value:"value"},dataList:d.statusList},null,8,["modelValue","dataList"])]),_:1}),a(x,{span:4.5},{default:l(()=>[a(k,{type:"primary",onClick:g},{default:l(()=>[c("查询")]),_:1}),a(k,{type:"success",onClick:F},{default:l(()=>[c("提现")]),_:1})]),_:1})]),_:1})]),_:1}),a(I,null,{default:l(()=>[a(E,{ref:"baseTableRef",api:"agentaccountorder.page",params:o(f),indexCode:!0},{default:l(()=>[a(u,{label:"提现单号",prop:"ordernum",width:"180px;"}),a(u,{label:"账户名字",prop:"accname"}),a(u,{label:"卡号/地址",prop:"accnumber",width:"280px;"}),a(u,{label:"结算汇率",prop:"agentexchange"},{default:l(e=>[e.row.agentexchange?(m(),i(C,{key:0,type:"danger"},{default:l(()=>[c(v(e.row.exchange)+"%",1)]),_:2},1024)):_("",!0)]),_:1}),a(u,{label:"到账RMB金额",prop:"amountreceived"},{default:l(e=>[e.row.amountreceived?(m(),i(C,{key:0,type:"success"},{default:l(()=>[c(v(e.row.amountreceived),1)]),_:2},1024)):_("",!0)]),_:1}),a(u,{label:"状态"},{default:l(e=>[e.row.statusname?(m(),i(C,{key:0},{default:l(()=>[c(v(e.row.statusname),1)]),_:2},1024)):_("",!0)]),_:1}),a(u,{label:"支付凭证",prop:"avatarUrl"},{default:l(e=>[h("span",null,[e.row.imgurl?(m(),$("img",{key:0,src:e.row.imgurl,alt:"",class:"img-sm"},null,8,W)):_("",!0)])]),_:1}),a(u,{label:"创建时间",prop:"create_time"}),a(u,{label:"备注",prop:"remark"}),a(u,{label:"操作",width:"100"},{default:l(e=>[e.row.status==10?(m(),i(A,{key:0,type:"success",onOk:Z=>T(e.row),label:"取消"},null,8,["onOk"])):_("",!0)]),_:1})]),_:1},8,["params"])]),_:1}),o(b)==="add"||o(b)==="update"?(m(),i(G,{key:0,modelValue:o(r),"onUpdate:modelValue":t[8]||(t[8]=e=>B(r)?r.value=e:r=e),title:d.dialogTitleObj[o(b)],width:"23%"},{footer:l(()=>[a(k,{onClick:t[7]||(t[7]=e=>B(r)?r.value=!1:r=!1)},{default:l(()=>[c("取 消")]),_:1}),a(k,{type:"primary",onClick:N},{default:l(()=>[c("确 定")]),_:1})]),default:l(()=>[a(z,{ref:"dataFormRef",model:o(s),"label-width":"100px"},{default:l(()=>[a(w,{label:"卡类型:"},{default:l(()=>[a(Q,{modelValue:o(s).accnumber,"onUpdate:modelValue":t[2]||(t[2]=e=>o(s).accnumber=e),placeholder:"请选择卡类型",style:{}},{default:l(()=>[(m(!0),$(K,null,P(o(U),e=>(m(),i(M,{key:e.id,value:e.id,label:e.accnumber},{default:l(()=>[h("span",X,v(e.accnumber),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(w,{label:"余额:"},{default:l(()=>[a(V,{modelValue:o(s).totalincome,"onUpdate:modelValue":t[3]||(t[3]=e=>o(s).totalincome=e),disabled:o(b)=="add"},null,8,["modelValue","disabled"])]),_:1}),a(w,{label:"商户结算汇率:"},{default:l(()=>[a(V,{modelValue:o(s).agentexchange,"onUpdate:modelValue":t[4]||(t[4]=e=>o(s).agentexchange=e)},null,8,["modelValue"])]),_:1}),a(w,{label:"金额:"},{default:l(()=>[a(V,{modelValue:o(s).amount,"onUpdate:modelValue":t[5]||(t[5]=e=>o(s).amount=e)},null,8,["modelValue"])]),_:1}),a(w,{label:"备注:",prop:"remark"},{default:l(()=>[a(V,{modelValue:o(s).remark,"onUpdate:modelValue":t[6]||(t[6]=e=>o(s).remark=e),type:"textarea",style:{width:"220px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])):_("",!0)]),_:1})}}};export{ae as default};
