import{g as T,r as f,a as d,b as D,c as I,w as l,d as e,u as a,i as t,e as R,n as u,j as C,z as $}from"./index-fc9417a1.js";const S={__name:"log",setup(j){const{proxy:c}=T();let b=f({}),o=f({}),p=f(!1),g=f("");f({});function m(){c.$refs.baseTableRef.refresh()}function v(_){o.value=Object.assign({},_),g.value="detail",p.value=!0}function w(){c.$refs.dataFormRef.validate(async _=>{if(_){let s=await c.$api.sys_log[o.value.id?"update":"add"](o.value);c.submitOk(s.message),m(),p.value=!1}})}return(_,s)=>{const y=d("base-input"),V=d("el-button"),k=d("base-header"),i=d("el-table-column"),q=d("base-table-p"),x=d("base-content"),r=d("base-cell-item"),h=d("base-cell"),U=d("base-dialog"),N=d("base-wrapper");return D(),I(N,null,{default:l(()=>[e(k,null,{default:l(()=>[e(y,{modelValue:a(b).apiMethod,"onUpdate:modelValue":s[0]||(s[0]=n=>a(b).apiMethod=n),label:"请求方法",onClear:m},null,8,["modelValue"]),e(y,{modelValue:a(b).requestUrl,"onUpdate:modelValue":s[1]||(s[1]=n=>a(b).requestUrl=n),label:"请求url",onClear:m},null,8,["modelValue"]),e(y,{modelValue:a(b).operationName,"onUpdate:modelValue":s[2]||(s[2]=n=>a(b).operationName=n),label:"操作人名称",onClear:m},null,8,["modelValue"]),e(V,{type:"primary",onClick:m},{default:l(()=>[t("查询")]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(q,{ref:"baseTableRef",api:"sys_log.page",params:a(b),indexCode:!0},{default:l(()=>[e(i,{label:"类型",prop:"type"}),e(i,{label:"请求方式",prop:"method"}),e(i,{label:"操作人名称",prop:"optname"}),e(i,{label:"请求IP",prop:"requestip"}),e(i,{label:"请求url",prop:"requesturl",width:"350px",align:"left"}),e(i,{label:"请求参数",prop:"requestparams",width:"500px"}),e(i,{label:"执行时间",prop:"time"},{default:l(n=>[R("span",null,u(n.row.time)+"毫秒",1)]),_:1}),e(i,{label:"操作时间",prop:"optdate"}),e(i,{label:"操作"},{default:l(n=>[e(V,{link:"",onClick:B=>v(n.row)},{default:l(()=>[t("详情")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["params"])]),_:1}),e(U,{modelValue:a(p),"onUpdate:modelValue":s[4]||(s[4]=n=>C(p)?p.value=n:p=n),title:_.dialogTitleObj[a(g)],width:"30%"},$({default:l(()=>[e(h,{"label-width":"150px"},{default:l(()=>[e(r,{label:"主键ID"},{default:l(()=>[t(u(a(o).id),1)]),_:1}),e(r,{label:"类型"},{default:l(()=>[t(u(a(o).type),1)]),_:1}),e(r,{label:"请求方法"},{default:l(()=>[t(u(a(o).method),1)]),_:1}),e(r,{label:"操作人名称"},{default:l(()=>[t(u(a(o).optname),1)]),_:1}),e(r,{label:"请求IP"},{default:l(()=>[t(u(a(o).requestip),1)]),_:1}),e(r,{label:"请求url"},{default:l(()=>[t(u(a(o).requesturl),1)]),_:1}),e(r,{label:"请求方式"},{default:l(()=>[t(u(a(o).method),1)]),_:1}),e(r,{label:"请求参数"},{default:l(()=>[t(u(a(o).requestparams),1)]),_:1}),e(r,{label:"执行时间(单位：毫秒)"},{default:l(()=>[t(u(a(o).time),1)]),_:1}),e(r,{label:"操作时间"},{default:l(()=>[t(u(a(o).optdate),1)]),_:1})]),_:1})]),_:2},[a(g)!=="detail"?{name:"footer",fn:l(()=>[e(V,{onClick:s[3]||(s[3]=n=>C(p)?p.value=!1:p=!1)},{default:l(()=>[t("取 消")]),_:1}),e(V,{type:"primary",onClick:w},{default:l(()=>[t("确 定")]),_:1})]),key:"0"}:void 0]),1032,["modelValue","title"])]),_:1})}}};export{S as default};
