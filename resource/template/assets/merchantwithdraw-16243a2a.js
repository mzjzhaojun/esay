import{g as K,r as _,a as n,b as m,c as i,w as t,d as a,u as l,i as p,n as h,k as b,e as U,m as $,j as B,F as P,q as W}from"./index-995db30f.js";const X=["src"],Y={style:{width:"300px"}},te={__name:"merchantwithdraw",setup(Z){const{proxy:c}=K();let O=c.$store.user.useUserStore();const{userObj:R}=O;let r=_({}),s=_(!1),f=_(""),g=_({userid:R.id,type:21}),C=_([]),q=_({merchantid:[{required:!0,message:"请选择商户",trigger:"blur"}],accnumber:[{required:!0,message:"请选择卡或地址",trigger:"blur"}],merchantexchange:[{required:!0,message:"请输入汇率",trigger:"blur"}],amount:[{required:!0,message:"请输入金额",trigger:"blur"}]});function w(){c.$refs.baseTableRef.refresh()}function F(){L(),f.value="add",s.value=!0}async function L(){let d=await c.$api.merchantaccount.bank();C.value=d.body.listbanks,r.value={totalincome:d.body.totalincome}}async function T(d){let o=await c.$api.merchantaccountorder.canclewithdraw(d.id);c.submitOk(o.message),w()}function N(){c.$refs.dataFormRef.validate(async d=>{if(d){r.value.id=null;let o=await c.$api.merchantaccountorder.withdraw(r.value);c.submitOk(o.message),w(),s.value=!1}})}return(d,o)=>{const S=n("base-input"),v=n("el-col"),j=n("base-select-no"),k=n("el-button"),D=n("el-row"),A=n("base-header"),u=n("el-table-column"),x=n("el-tag"),E=n("base-confirm-btn"),I=n("base-table-p"),M=n("base-content"),Q=n("el-option"),z=n("el-select"),y=n("el-form-item"),V=n("base-input-no"),G=n("el-form"),H=n("base-dialog"),J=n("base-wrapper");return m(),i(J,null,{default:t(()=>[a(A,null,{default:t(()=>[a(D,null,{default:t(()=>[a(v,{span:4.5},{default:t(()=>[a(S,{modelValue:l(g).nikname,"onUpdate:modelValue":o[0]||(o[0]=e=>l(g).nikname=e),label:"充值金额",onClear:w},null,8,["modelValue"])]),_:1}),a(v,{span:4.5},{default:t(()=>[a(j,{modelValue:l(g).status,"onUpdate:modelValue":o[1]||(o[1]=e=>l(g).status=e),label:"状态","tag-type":"success",onClear:w,style:{"margin-right":"10px"},clearable:"","option-props":{label:"name",value:"value"},dataList:d.statusList},null,8,["modelValue","dataList"])]),_:1}),a(v,{span:4.5},{default:t(()=>[a(k,{type:"primary",onClick:w},{default:t(()=>[p("查询")]),_:1}),a(k,{type:"success",onClick:F},{default:t(()=>[p("提现")]),_:1})]),_:1})]),_:1})]),_:1}),a(M,null,{default:t(()=>[a(I,{ref:"baseTableRef",api:"merchantaccountorder.page",params:l(g),indexCode:!0},{default:t(()=>[a(u,{label:"提现单号",prop:"ordernum",width:"180px;"}),a(u,{label:"账户名字",prop:"accname"}),a(u,{label:"卡号/地址",prop:"accnumber",width:"280px;"}),a(u,{label:"结算汇率",prop:"merchantexchange"},{default:t(e=>[e.row.merchantexchange?(m(),i(x,{key:0,type:"danger"},{default:t(()=>[p(h(e.row.exchange)+"%",1)]),_:2},1024)):b("",!0)]),_:1}),a(u,{label:"到账RMB金额",prop:"amountreceived"},{default:t(e=>[e.row.amountreceived?(m(),i(x,{key:0,type:"success"},{default:t(()=>[p(h(e.row.amountreceived),1)]),_:2},1024)):b("",!0)]),_:1}),a(u,{label:"状态"},{default:t(e=>[e.row.statusname?(m(),i(x,{key:0},{default:t(()=>[p(h(e.row.statusname),1)]),_:2},1024)):b("",!0)]),_:1}),a(u,{label:"支付凭证",prop:"avatarUrl"},{default:t(e=>[U("span",null,[e.row.imgurl?(m(),$("img",{key:0,src:e.row.imgurl,alt:"",class:"img-sm"},null,8,X)):b("",!0)])]),_:1}),a(u,{label:"创建时间",prop:"create_time"}),a(u,{label:"备注",prop:"remark"}),a(u,{label:"操作",width:"100"},{default:t(e=>[e.row.status==10?(m(),i(E,{key:0,type:"success",onOk:ee=>T(e.row),label:"取消"},null,8,["onOk"])):b("",!0)]),_:1})]),_:1},8,["params"])]),_:1}),l(f)==="add"||l(f)==="update"?(m(),i(H,{key:0,modelValue:l(s),"onUpdate:modelValue":o[8]||(o[8]=e=>B(s)?s.value=e:s=e),title:d.dialogTitleObj[l(f)],width:"21%"},{footer:t(()=>[a(k,{onClick:o[7]||(o[7]=e=>B(s)?s.value=!1:s=!1)},{default:t(()=>[p("取 消")]),_:1}),a(k,{type:"primary",onClick:N},{default:t(()=>[p("确 定")]),_:1})]),default:t(()=>[a(G,{ref:"dataFormRef",rules:l(q),model:l(r),"label-width":"100px"},{default:t(()=>[a(y,{label:"卡号/地址:",prop:"accnumber"},{default:t(()=>[a(z,{modelValue:l(r).accnumber,"onUpdate:modelValue":o[2]||(o[2]=e=>l(r).accnumber=e),placeholder:"请选择卡类型",style:{}},{default:t(()=>[(m(!0),$(P,null,W(l(C),e=>(m(),i(Q,{key:e.id,value:e.id,label:e.accnumber},{default:t(()=>[U("span",Y,h(e.accnumber),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(y,{label:"余额:",prop:"totalincome"},{default:t(()=>[a(V,{modelValue:l(r).totalincome,"onUpdate:modelValue":o[3]||(o[3]=e=>l(r).totalincome=e),disabled:l(f)=="add"},null,8,["modelValue","disabled"])]),_:1}),a(y,{label:"结算汇率:",prop:"merchantexchange"},{default:t(()=>[a(V,{modelValue:l(r).merchantexchange,"onUpdate:modelValue":o[4]||(o[4]=e=>l(r).merchantexchange=e)},null,8,["modelValue"])]),_:1}),a(y,{label:"金额:",prop:"amount"},{default:t(()=>[a(V,{modelValue:l(r).amount,"onUpdate:modelValue":o[5]||(o[5]=e=>l(r).amount=e)},null,8,["modelValue"])]),_:1}),a(y,{label:"备注:",prop:"remark"},{default:t(()=>[a(V,{modelValue:l(r).remark,"onUpdate:modelValue":o[6]||(o[6]=e=>l(r).remark=e),type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])):b("",!0)]),_:1})}}};export{te as default};
