import{g as P,r as b,a as d,b as A,c as I,w as o,d as e,u as t,i as f,j as v}from"./index-971bc216.js";const E={__name:"post",setup(Q){const{proxy:p}=P();let i=b({}),n=b({}),s=b(!1),V=b(""),w=b({dept_id:[{required:!0,message:"归属部门不得为空",trigger:"blur"}],name:[{required:!0,message:"名称不得为空",trigger:"blur"}],code:[{required:!0,message:"岗位编码不得为空",trigger:"blur"}]});function c(){p.$refs.baseTableRef.refresh()}function U(){n.value={status:!0,sort:100},V.value="add",s.value=!0}function C(r){n.value=Object.assign({},r),V.value="update",s.value=!0}async function x(r){let a=await p.$api.sys_post.delete({id:r.id});c(),p.submitOk(a.message)}function O(){p.$refs.dataFormRef.validate(async r=>{if(r){let a=await p.$api.sys_post[n.value.id?"update":"add"](n.value);p.submitOk(a.message),c(),s.value=!1}})}return(r,a)=>{const k=d("base-cascader"),$=d("base-input"),_=d("el-button"),R=d("base-header"),u=d("el-table-column"),T=d("base-tag"),h=d("base-delete-btn"),j=d("base-table-p"),q=d("base-content"),m=d("el-form-item"),g=d("base-input-no"),F=d("base-radio-group"),S=d("el-input-number"),B=d("el-form"),D=d("base-dialog"),N=d("base-wrapper");return A(),I(N,null,{default:o(()=>[e(R,null,{default:o(()=>[e(k,{modelValue:t(i).dept_id,"onUpdate:modelValue":a[0]||(a[0]=l=>t(i).dept_id=l),style:{"margin-right":"10px"},clearable:"",label:"部门",props:{value:"id",label:"name",children:"children",checkStrictly:!0,emitPath:!1},api:"sys_dept.tree"},null,8,["modelValue"]),e($,{modelValue:t(i).name,"onUpdate:modelValue":a[1]||(a[1]=l=>t(i).name=l),label:"岗位名称",onClear:c},null,8,["modelValue"]),e(_,{type:"primary",onClick:c},{default:o(()=>[f("查询")]),_:1}),e(_,{type:"success",onClick:U},{default:o(()=>[f("添加")]),_:1})]),_:1}),e(q,null,{default:o(()=>[e(j,{ref:"baseTableRef",api:"sys_post.page",params:t(i),indexCode:!0},{default:o(()=>[e(u,{label:"归属部门",prop:"deptname"}),e(u,{label:"岗位名称",prop:"name"}),e(u,{label:"岗位编码",prop:"code"}),e(u,{label:"排序",prop:"sort"}),e(u,{label:"状态"},{default:o(l=>[e(T,{modelValue:l.row.status,"onUpdate:modelValue":y=>l.row.status=y},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"备注",prop:"remark"}),e(u,{label:"创建时间",prop:"create_time"}),e(u,{label:"操作"},{default:o(l=>[e(_,{link:"",onClick:y=>C(l.row)},{default:o(()=>[f("编辑")]),_:2},1032,["onClick"]),e(h,{onOk:y=>x(l.row)},null,8,["onOk"])]),_:1})]),_:1},8,["params"])]),_:1}),e(D,{modelValue:t(s),"onUpdate:modelValue":a[9]||(a[9]=l=>v(s)?s.value=l:s=l),title:r.dialogTitleObj[t(V)],width:"23%"},{footer:o(()=>[e(_,{onClick:a[8]||(a[8]=l=>v(s)?s.value=!1:s=!1)},{default:o(()=>[f("取 消")]),_:1}),e(_,{type:"primary",onClick:O},{default:o(()=>[f("确 定")]),_:1})]),default:o(()=>[e(B,{ref:"dataFormRef",model:t(n),rules:t(w),"label-width":"100px"},{default:o(()=>[e(m,{label:"归属部门:",prop:"dept_id"},{default:o(()=>[e(k,{modelValue:t(n).dept_id,"onUpdate:modelValue":a[2]||(a[2]=l=>t(n).dept_id=l),style:{width:"100%"},clearable:"",props:{value:"id",label:"name",children:"children",checkStrictly:!0,emitPath:!1},api:"sys_dept.tree"},null,8,["modelValue"])]),_:1}),e(m,{label:"岗位名称:",prop:"name"},{default:o(()=>[e(g,{modelValue:t(n).name,"onUpdate:modelValue":a[3]||(a[3]=l=>t(n).name=l)},null,8,["modelValue"])]),_:1}),e(m,{label:"岗位编码:",prop:"code"},{default:o(()=>[e(g,{modelValue:t(n).code,"onUpdate:modelValue":a[4]||(a[4]=l=>t(n).code=l)},null,8,["modelValue"])]),_:1}),e(m,{label:"状态:"},{default:o(()=>[e(F,{modelValue:t(n).status,"onUpdate:modelValue":a[5]||(a[5]=l=>t(n).status=l)},null,8,["modelValue"])]),_:1}),e(m,{label:"排序:"},{default:o(()=>[e(S,{modelValue:t(n).sort,"onUpdate:modelValue":a[6]||(a[6]=l=>t(n).sort=l),min:1,"controls-position":"right",placeholder:"请输入排序"},null,8,["modelValue"])]),_:1}),e(m,{label:"备注:"},{default:o(()=>[e(g,{modelValue:t(n).remark,"onUpdate:modelValue":a[7]||(a[7]=l=>t(n).remark=l),rows:2,type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])]),_:1})}}};export{E as default};
