import{g as P,r as c,o as W,a as t,b as p,c as _,w as l,d as e,u as n,i,n as x,k as U,j as h,m as X,F as Y,q as Z,e as $,s as ee}from"./index-995db30f.js";const ae={style:{float:"left",color:"#8492a6","font-size":"12px"}},le={style:{float:"right"}},ne={__name:"merchantbank",setup(te){const{proxy:u}=P();let B=u.$store.user.useUserStore();const{userObj:F}=B;let s=c({}),r=c(!1),b=c(""),V=c({userid:F.id}),w=c([]),O=c({accname:[{required:!0,message:"请输入姓名",trigger:"blur"}],accnumber:[{required:!0,message:"请输入卡号或地址",trigger:"blur"}],type:[{required:!0,message:"请选择卡类型",trigger:"blur"}]});W(()=>{T()});function f(){u.$refs.baseTableRef.refresh()}function R(){b.value="add",r.value=!0}async function T(){let m=await u.$api.sys_dict.listFromCacheByCode("bankcardtype");w.value=m.body}async function q(m){let o=await u.$api.merchantaccountbank.delete(m.id);f(),u.submitOk(o.message)}function D(){u.$refs.dataFormRef.validate(async m=>{if(m){s.value.id=null;let o=await u.$api.merchantaccountbank[s.value.id?"update":"add"](s.value);u.submitOk(o.message),f(),r.value=!1}})}return(m,o)=>{const N=t("base-input"),v=t("el-col"),y=t("el-button"),S=t("el-row"),j=t("base-header"),d=t("el-table-column"),L=t("el-tag"),z=t("base-tag"),A=t("base-delete-btn"),E=t("base-table-p"),I=t("base-content"),M=t("el-icon"),Q=t("el-option"),G=t("el-select"),g=t("el-form-item"),k=t("base-input-no"),H=t("el-form"),J=t("base-dialog"),K=t("base-wrapper");return p(),_(K,null,{default:l(()=>[e(j,null,{default:l(()=>[e(S,null,{default:l(()=>[e(v,{span:4.5},{default:l(()=>[e(N,{modelValue:n(V).accname,"onUpdate:modelValue":o[0]||(o[0]=a=>n(V).accname=a),label:"账户名",onClear:f},null,8,["modelValue"])]),_:1}),e(v,{span:4.5},{default:l(()=>[e(y,{type:"primary",onClick:f},{default:l(()=>[i("查询")]),_:1}),e(y,{type:"success",onClick:R},{default:l(()=>[i("添加")]),_:1})]),_:1})]),_:1})]),_:1}),e(I,null,{default:l(()=>[e(E,{ref:"baseTableRef",api:"merchantaccountbank.page",params:n(V),indexCode:!0},{default:l(()=>[e(d,{label:"用户名",prop:"username"}),e(d,{label:"账户类型",prop:"typename"}),e(d,{label:"账户名",prop:"accname"},{default:l(a=>[a.row.accname?(p(),_(L,{key:0},{default:l(()=>[i(x(a.row.accname),1)]),_:2},1024)):U("",!0)]),_:1}),e(d,{label:"卡号/地址",prop:"accnumber",width:"280px;"}),e(d,{label:"状态"},{default:l(a=>[e(z,{modelValue:a.row.status,"onUpdate:modelValue":C=>a.row.status=C},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(d,{label:"创建时间",prop:"create_time"}),e(d,{label:"备注",prop:"remark"}),e(d,{label:"操作"},{default:l(a=>[e(A,{onOk:C=>q(a.row)},null,8,["onOk"])]),_:1})]),_:1},8,["params"])]),_:1}),n(b)==="add"||n(b)==="update"?(p(),_(J,{key:0,modelValue:n(r),"onUpdate:modelValue":o[6]||(o[6]=a=>h(r)?r.value=a:r=a),title:m.dialogTitleObj[n(b)],width:"23%"},{footer:l(()=>[e(y,{onClick:o[5]||(o[5]=a=>h(r)?r.value=!1:r=!1)},{default:l(()=>[i("取 消")]),_:1}),e(y,{type:"primary",onClick:D},{default:l(()=>[i("确 定")]),_:1})]),default:l(()=>[e(H,{ref:"dataFormRef",rules:n(O),model:n(s),"label-width":"100px"},{default:l(()=>[e(g,{label:"类型:",prop:"type"},{default:l(()=>[e(G,{modelValue:n(s).type,"onUpdate:modelValue":o[1]||(o[1]=a=>n(s).type=a),placeholder:"请选择卡类型",style:{width:"200px"},filterable:"",clearable:"","allow-create":""},{default:l(()=>[(p(!0),X(Y,null,Z(n(w),a=>(p(),_(Q,{key:a.name,value:a.value,label:a.name},{default:l(()=>[$("span",ae,x(a.name),1),$("div",le,[e(M,{size:"16"},{default:l(()=>[(p(),_(ee(a.name)))]),_:2},1024)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"姓名:",prop:"accname"},{default:l(()=>[e(k,{modelValue:n(s).accname,"onUpdate:modelValue":o[2]||(o[2]=a=>n(s).accname=a)},null,8,["modelValue"])]),_:1}),e(g,{label:"账号/地址:",prop:"accnumber"},{default:l(()=>[e(k,{modelValue:n(s).accnumber,"onUpdate:modelValue":o[3]||(o[3]=a=>n(s).accnumber=a)},null,8,["modelValue"])]),_:1}),e(g,{label:"备注:"},{default:l(()=>[e(k,{modelValue:n(s).remark,"onUpdate:modelValue":o[4]||(o[4]=a=>n(s).remark=a),type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])):U("",!0)]),_:1})}}};export{ne as default};
