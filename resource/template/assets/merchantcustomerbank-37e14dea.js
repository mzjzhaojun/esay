import{g as I,r as p,a as r,b as g,c as V,w as t,d as e,u as o,i as f,j as C,k as P}from"./index-55143ade.js";const G={__name:"merchantcustomerbank",setup(Q){const{proxy:u}=I();let w=u.$store.user.useUserStore();const{userObj:A}=w;let a=p({}),s=p(!1),c=p(""),v=p({userid:A.id});p([]);let x=p({accname:[{required:!0,message:"请输入姓名",trigger:"blur"}],accnumber:[{required:!0,message:"请输入卡号",trigger:"blur"}],bankcode:[{required:!0,message:"请选择银行",trigger:"blur"}],provinceCityAreaList:[{required:!0,message:"请选择银行地址",trigger:"blur"}]});function b(){u.$refs.baseTableRef.refresh()}function L(){a.value={},c.value="add",s.value=!0}async function U(i){let l=await u.$api.merchantcustomerbanks.delete(i.id);b(),u.submitOk(l.message)}function h(){u.$refs.dataFormRef.validate(async i=>{if(i){a.value.provinceCityAreaList&&(a.value.bankaddress=a.value.provinceCityAreaList[0],a.value.provinceCityAreaList.length>1&&(a.value.bankaddress=a.value.bankaddress+""+a.value.provinceCityAreaList[1]),a.value.provinceCityAreaList.length>2&&(a.value.bankaddress=a.value.bankaddress+""+a.value.provinceCityAreaList[1]+a.value.provinceCityAreaList[2])),a.value.id=null;let l=await u.$api.merchantcustomerbanks[a.value.id?"update":"add"](a.value);u.submitOk(l.message),b(),s.value=!1}})}return(i,l)=>{const O=r("base-input"),y=r("el-col"),_=r("el-button"),$=r("el-row"),R=r("base-header"),d=r("el-table-column"),T=r("base-delete-btn"),q=r("base-table-p"),S=r("base-content"),k=r("base-input-no"),m=r("el-form-item"),j=r("base-cascader-no"),F=r("province-city-area"),N=r("el-form"),B=r("base-dialog"),D=r("base-wrapper");return g(),V(D,null,{default:t(()=>[e(R,null,{default:t(()=>[e($,null,{default:t(()=>[e(y,{span:4.5},{default:t(()=>[e(O,{modelValue:o(v).accname,"onUpdate:modelValue":l[0]||(l[0]=n=>o(v).accname=n),label:"账户名",onClear:b},null,8,["modelValue"])]),_:1}),e(y,{span:4.5},{default:t(()=>[e(_,{type:"primary",onClick:b},{default:t(()=>[f("查询")]),_:1}),e(_,{type:"success",onClick:L},{default:t(()=>[f("添加")]),_:1})]),_:1})]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(q,{ref:"baseTableRef",api:"merchantcustomerbanks.page",params:o(v),indexCode:!0},{default:t(()=>[e(d,{label:"姓名",prop:"accname"}),e(d,{label:"账号",prop:"accnumber"}),e(d,{label:"银行编码",prop:"bankcode",width:"180px;"}),e(d,{label:"银行名称",prop:"bankname",width:"280px;"}),e(d,{label:"银行地址",prop:"bankaddress",width:"280px;"}),e(d,{label:"创建时间",prop:"create_time"}),e(d,{label:"操作"},{default:t(n=>[e(T,{onOk:z=>U(n.row)},null,8,["onOk"])]),_:1})]),_:1},8,["params"])]),_:1}),o(c)==="add"||o(c)==="update"?(g(),V(B,{key:0,modelValue:o(s),"onUpdate:modelValue":l[7]||(l[7]=n=>C(s)?s.value=n:s=n),title:i.dialogTitleObj[o(c)],width:"23%"},{footer:t(()=>[e(_,{onClick:l[6]||(l[6]=n=>C(s)?s.value=!1:s=!1)},{default:t(()=>[f("取 消")]),_:1}),e(_,{type:"primary",onClick:h},{default:t(()=>[f("确 定")]),_:1})]),default:t(()=>[e(N,{ref:"dataFormRef",rules:o(x),model:o(a),"label-width":"100px"},{default:t(()=>[e(m,{label:"姓名:",prop:"accname"},{default:t(()=>[e(k,{modelValue:o(a).accname,"onUpdate:modelValue":l[1]||(l[1]=n=>o(a).accname=n)},null,8,["modelValue"])]),_:1}),e(m,{label:"账号:",prop:"accnumber"},{default:t(()=>[e(k,{modelValue:o(a).accnumber,"onUpdate:modelValue":l[2]||(l[2]=n=>o(a).accnumber=n)},null,8,["modelValue"])]),_:1}),e(m,{label:"银行名称:",prop:"bankcode"},{default:t(()=>[e(j,{modelValue:o(a).bankcode,"onUpdate:modelValue":l[3]||(l[3]=n=>o(a).bankcode=n),style:{"margin-right":"10px"},clearable:"",label:"",params:i.params,props:{value:"code",label:"name",checkStrictly:!0,emitPath:!1},api:"sys_bank.list"},null,8,["modelValue","params"])]),_:1}),e(m,{label:"银行卡地址:",prop:"provinceCityAreaList"},{default:t(()=>[e(F,{modelValue:o(a).provinceCityAreaList,"onUpdate:modelValue":l[4]||(l[4]=n=>o(a).provinceCityAreaList=n)},null,8,["modelValue"])]),_:1}),e(m,{label:"备注:"},{default:t(()=>[e(k,{modelValue:o(a).remark,"onUpdate:modelValue":l[5]||(l[5]=n=>o(a).remark=n),type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])):P("",!0)]),_:1})}}};export{G as default};
