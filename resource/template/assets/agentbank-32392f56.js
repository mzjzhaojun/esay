import{g as J,r as c,o as K,a as t,b as p,c as _,w as l,d as e,u as n,i,n as x,k as U,j as $,m as P,F as W,q as X,e as B,s as Y}from"./index-fc9417a1.js";const Z={style:{float:"left",color:"#8492a6","font-size":"12px"}},ee={style:{float:"right"}},te={__name:"agentbank",setup(ae){const{proxy:d}=J(),{userObj:F}=d.$store.user.useUserStore();let s=c({}),u=c(!1),b=c(""),k=c({userid:F.id}),w=c([]);K(()=>{R()});function f(){d.$refs.baseTableRef.refresh()}function O(){b.value="add",u.value=!0}async function R(){let m=await d.$api.sys_dict.listFromCacheByCode("cardtype");w.value=m.body}async function T(m){let o=await d.$api.agentaccountbank.delete(m.id);f(),d.submitOk(o.message)}function h(){d.$refs.dataFormRef.validate(async m=>{if(m){s.value.id=null;let o=await d.$api.agentaccountbank[s.value.id?"update":"add"](s.value);d.submitOk(o.message),f(),u.value=!1}})}return(m,o)=>{const D=t("base-input"),v=t("el-col"),y=t("el-button"),N=t("el-row"),j=t("base-header"),r=t("el-table-column"),L=t("el-tag"),S=t("base-tag"),z=t("base-delete-btn"),q=t("base-table-p"),A=t("base-content"),E=t("el-icon"),I=t("el-option"),M=t("el-select"),V=t("el-form-item"),g=t("base-input-no"),Q=t("el-form"),G=t("base-dialog"),H=t("base-wrapper");return p(),_(H,null,{default:l(()=>[e(j,null,{default:l(()=>[e(N,null,{default:l(()=>[e(v,{span:4.5},{default:l(()=>[e(D,{modelValue:n(k).accname,"onUpdate:modelValue":o[0]||(o[0]=a=>n(k).accname=a),label:"账户名",onClear:f},null,8,["modelValue"])]),_:1}),e(v,{span:4.5},{default:l(()=>[e(y,{type:"primary",onClick:f},{default:l(()=>[i("查询")]),_:1}),e(y,{type:"success",onClick:O},{default:l(()=>[i("添加")]),_:1})]),_:1})]),_:1})]),_:1}),e(A,null,{default:l(()=>[e(q,{ref:"baseTableRef",api:"agentaccountbank.page",params:n(k),indexCode:!0},{default:l(()=>[e(r,{label:"用户名",prop:"username"}),e(r,{label:"账户类型",prop:"typename"}),e(r,{label:"账户名",prop:"accname"},{default:l(a=>[a.row.accname?(p(),_(L,{key:0},{default:l(()=>[i(x(a.row.accname),1)]),_:2},1024)):U("",!0)]),_:1}),e(r,{label:"卡号/地址",prop:"accnumber",width:"280px;"}),e(r,{label:"状态"},{default:l(a=>[e(S,{modelValue:a.row.status,"onUpdate:modelValue":C=>a.row.status=C},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(r,{label:"创建时间",prop:"create_time"}),e(r,{label:"备注",prop:"remark"}),e(r,{label:"操作"},{default:l(a=>[e(z,{onOk:C=>T(a.row)},null,8,["onOk"])]),_:1})]),_:1},8,["params"])]),_:1}),n(b)==="add"||n(b)==="update"?(p(),_(G,{key:0,modelValue:n(u),"onUpdate:modelValue":o[6]||(o[6]=a=>$(u)?u.value=a:u=a),title:m.dialogTitleObj[n(b)],width:"25%"},{footer:l(()=>[e(y,{onClick:o[5]||(o[5]=a=>$(u)?u.value=!1:u=!1)},{default:l(()=>[i("取 消")]),_:1}),e(y,{type:"primary",onClick:h},{default:l(()=>[i("确 定")]),_:1})]),default:l(()=>[e(Q,{ref:"dataFormRef",model:n(s),"label-width":"100px"},{default:l(()=>[e(V,{label:"卡类型:"},{default:l(()=>[e(M,{modelValue:n(s).type,"onUpdate:modelValue":o[1]||(o[1]=a=>n(s).type=a),placeholder:"请选择卡类型",style:{width:"200px"},filterable:"",clearable:"","allow-create":""},{default:l(()=>[(p(!0),P(W,null,X(n(w),a=>(p(),_(I,{key:a.name,value:a.value,label:a.name},{default:l(()=>[B("span",Z,x(a.name),1),B("div",ee,[e(E,{size:"16"},{default:l(()=>[(p(),_(Y(a.name)))]),_:2},1024)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(V,{label:"姓名:"},{default:l(()=>[e(g,{modelValue:n(s).accname,"onUpdate:modelValue":o[2]||(o[2]=a=>n(s).accname=a)},null,8,["modelValue"])]),_:1}),e(V,{label:"账号或地址:",prop:"avatar"},{default:l(()=>[e(g,{modelValue:n(s).accnumber,"onUpdate:modelValue":o[3]||(o[3]=a=>n(s).accnumber=a)},null,8,["modelValue"])]),_:1}),e(V,{label:"备注:",prop:"avatar"},{default:l(()=>[e(g,{modelValue:n(s).remark,"onUpdate:modelValue":o[4]||(o[4]=a=>n(s).remark=a),type:"textarea",style:{width:"215px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])):U("",!0)]),_:1})}}};export{te as default};
