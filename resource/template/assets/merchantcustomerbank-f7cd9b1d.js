import{g as I,r as d,a as o,b as w,c as y,w as a,d as e,u as t,i as k,j as v,k as Q}from"./index-343df799.js";const H={__name:"merchantcustomerbank",setup(z){const{proxy:s}=I();let C=s.$store.user.useUserStore();const{userObj:x}=C;let u=d({}),r=d(!1),b=d(""),V=d({userid:x.id});d([]);let U=d({accname:[{required:!0,message:"请输入姓名",trigger:"blur"}],accnumber:[{required:!0,message:"请输入卡号或地址",trigger:"blur"}],type:[{required:!0,message:"请选择卡类型",trigger:"blur"}]});function c(){s.$refs.baseTableRef.refresh()}function O(){u.value={},b.value="add",r.value=!0}async function $(m){let l=await s.$api.banks.delete(m.id);c(),s.submitOk(l.message)}function R(){s.$refs.dataFormRef.validate(async m=>{if(m){u.value.id=null;let l=await s.$api.banks[u.value.id?"update":"add"](u.value);s.submitOk(l.message),c(),r.value=!1}})}return(m,l)=>{const T=o("base-input"),g=o("el-col"),i=o("el-button"),j=o("el-row"),q=o("base-header"),p=o("el-table-column"),F=o("base-delete-btn"),N=o("base-table-p"),S=o("base-content"),_=o("base-input-no"),f=o("el-form-item"),B=o("el-form"),D=o("base-dialog"),A=o("base-wrapper");return w(),y(A,null,{default:a(()=>[e(q,null,{default:a(()=>[e(j,null,{default:a(()=>[e(g,{span:4.5},{default:a(()=>[e(T,{modelValue:t(V).accname,"onUpdate:modelValue":l[0]||(l[0]=n=>t(V).accname=n),label:"账户名",onClear:c},null,8,["modelValue"])]),_:1}),e(g,{span:4.5},{default:a(()=>[e(i,{type:"primary",onClick:c},{default:a(()=>[k("查询")]),_:1}),e(i,{type:"success",onClick:O},{default:a(()=>[k("添加")]),_:1})]),_:1})]),_:1})]),_:1}),e(S,null,{default:a(()=>[e(N,{ref:"baseTableRef",api:"banks.page",params:t(V),indexCode:!0},{default:a(()=>[e(p,{label:"姓名",prop:"accname"}),e(p,{label:"账号",prop:"accnumber"}),e(p,{label:"银行名称",prop:"bankname",width:"280px;"}),e(p,{label:"创建时间",prop:"create_time"}),e(p,{label:"操作"},{default:a(n=>[e(F,{onOk:E=>$(n.row)},null,8,["onOk"])]),_:1})]),_:1},8,["params"])]),_:1}),t(b)==="add"||t(b)==="update"?(w(),y(D,{key:0,modelValue:t(r),"onUpdate:modelValue":l[6]||(l[6]=n=>v(r)?r.value=n:r=n),title:m.dialogTitleObj[t(b)],width:"23%"},{footer:a(()=>[e(i,{onClick:l[5]||(l[5]=n=>v(r)?r.value=!1:r=!1)},{default:a(()=>[k("取 消")]),_:1}),e(i,{type:"primary",onClick:R},{default:a(()=>[k("确 定")]),_:1})]),default:a(()=>[e(B,{ref:"dataFormRef",rules:t(U),model:t(u),"label-width":"100px"},{default:a(()=>[e(f,{label:"姓名:",prop:"accname"},{default:a(()=>[e(_,{modelValue:t(u).accname,"onUpdate:modelValue":l[1]||(l[1]=n=>t(u).accname=n)},null,8,["modelValue"])]),_:1}),e(f,{label:"账号:",prop:"accnumber"},{default:a(()=>[e(_,{modelValue:t(u).accnumber,"onUpdate:modelValue":l[2]||(l[2]=n=>t(u).accnumber=n)},null,8,["modelValue"])]),_:1}),e(f,{label:"银行名称:",prop:"bankname"},{default:a(()=>[e(_,{modelValue:t(u).bankname,"onUpdate:modelValue":l[3]||(l[3]=n=>t(u).bankname=n)},null,8,["modelValue"])]),_:1}),e(f,{label:"备注:"},{default:a(()=>[e(_,{modelValue:t(u).remark,"onUpdate:modelValue":l[4]||(l[4]=n=>t(u).remark=n),type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])):Q("",!0)]),_:1})}}};export{H as default};
