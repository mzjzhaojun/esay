import{g as H,r as w,a as n,b as i,c,w as l,d as e,u as t,i as p,n as V,k as b,e as h,m as J,j as O}from"./index-857f4c92.js";const K=["src"],P={style:{"text-align":"center"}},Z={__name:"merchantorder",setup(W){const{proxy:u}=H();let R=u.$store.user.useUserStore();const{userObj:$}=R;let r=w({}),d=w(!1),f=w(""),g=w({userid:$.id}),T=w({imgurl:[{required:!0,message:"请上传支付凭证",trigger:"blur"}],amount:[{required:!0,message:"请输入金额",trigger:"blur"}]});function y(){u.$refs.baseTableRef.refresh()}function B(){U(),f.value="add",d.value=!0}async function U(){let m=await u.$api.payconfig.get();r.value=m.body,u.submitOk(m.message)}async function q(m){let o=await u.$api.merchantaccountorder.cancle(m.id);u.submitOk(o.message),y()}function N(){u.$refs.dataFormRef.validate(async m=>{if(m){r.value.id=null;let o=await u.$api.merchantaccountorder.add(r.value);u.submitOk(o.message),y(),d.value=!1}})}return(m,o)=>{const S=n("base-input"),v=n("el-col"),j=n("base-select-no"),k=n("el-button"),F=n("el-row"),L=n("base-header"),s=n("el-table-column"),x=n("el-tag"),D=n("base-confirm-btn"),E=n("base-table-p"),z=n("base-content"),C=n("base-input-no"),_=n("el-form-item"),A=n("base-qrcode"),I=n("base-upload-single"),M=n("el-form"),Q=n("base-dialog"),G=n("base-wrapper");return i(),c(G,null,{default:l(()=>[e(L,null,{default:l(()=>[e(F,null,{default:l(()=>[e(v,{span:4.5},{default:l(()=>[e(S,{modelValue:t(g).nikname,"onUpdate:modelValue":o[0]||(o[0]=a=>t(g).nikname=a),label:"充值金额",onClear:y},null,8,["modelValue"])]),_:1}),e(v,{span:4.5},{default:l(()=>[e(j,{modelValue:t(g).status,"onUpdate:modelValue":o[1]||(o[1]=a=>t(g).status=a),label:"状态","tag-type":"success",onClear:y,style:{"margin-right":"10px"},clearable:"","option-props":{label:"name",value:"value"},dataList:m.statusList},null,8,["modelValue","dataList"])]),_:1}),e(v,{span:4.5},{default:l(()=>[e(k,{type:"primary",onClick:y},{default:l(()=>[p("查询")]),_:1}),e(k,{type:"success",onClick:B},{default:l(()=>[p("充值")]),_:1})]),_:1})]),_:1})]),_:1}),e(z,null,{default:l(()=>[e(E,{ref:"baseTableRef",api:"merchantaccountorder.page",params:t(g),indexCode:!0},{default:l(()=>[e(s,{label:"充值单号",prop:"ordernum",width:"180px;"}),e(s,{label:"商户名称",prop:"username"}),e(s,{label:"商户编码",prop:"merchantcode"}),e(s,{label:"标签",prop:"nkname"}),e(s,{label:"充值U金额",prop:"amount"}),e(s,{label:"汇率",prop:"exchange"},{default:l(a=>[a.row.exchange?(i(),c(x,{key:0,type:"danger"},{default:l(()=>[p(V(a.row.exchange),1)]),_:2},1024)):b("",!0)]),_:1}),e(s,{label:"到账RMB金额",prop:"amountreceived"},{default:l(a=>[a.row.amountreceived?(i(),c(x,{key:0,type:"success"},{default:l(()=>[p(V(a.row.amountreceived),1)]),_:2},1024)):b("",!0)]),_:1}),e(s,{label:"状态"},{default:l(a=>[a.row.statusname?(i(),c(x,{key:0},{default:l(()=>[p(V(a.row.statusname),1)]),_:2},1024)):b("",!0)]),_:1}),e(s,{label:"支付凭证",prop:"imgurl"},{default:l(a=>[h("span",null,[a.row.imgurl?(i(),J("img",{key:0,src:a.row.imgurl,alt:"",class:"img-sm"},null,8,K)):b("",!0)])]),_:1}),e(s,{label:"创建时间",prop:"create_time"}),e(s,{label:"备注",prop:"remark",width:"280"}),e(s,{label:"操作",width:"100"},{default:l(a=>[a.row.status==10?(i(),c(D,{key:0,type:"success",onOk:X=>q(a.row),label:"取消"},null,8,["onOk"])):b("",!0)]),_:1})]),_:1},8,["params"])]),_:1}),t(f)==="add"||t(f)==="update"?(i(),c(Q,{key:0,modelValue:t(d),"onUpdate:modelValue":o[7]||(o[7]=a=>O(d)?d.value=a:d=a),title:m.dialogTitleObj[t(f)],width:"23%"},{footer:l(()=>[e(k,{onClick:o[6]||(o[6]=a=>O(d)?d.value=!1:d=!1)},{default:l(()=>[p("取 消")]),_:1}),e(k,{type:"primary",onClick:N},{default:l(()=>[p("确 定")]),_:1})]),default:l(()=>[e(M,{ref:"dataFormRef",rules:t(T),model:t(r),"label-width":"100px"},{default:l(()=>[e(_,{label:"充值金额:",prop:"amount"},{default:l(()=>[e(C,{modelValue:t(r).amount,"onUpdate:modelValue":o[2]||(o[2]=a=>t(r).amount=a)},null,8,["modelValue"])]),_:1}),e(_,{label:"汇率:"},{default:l(()=>[e(C,{modelValue:t(r).exchange,"onUpdate:modelValue":o[3]||(o[3]=a=>t(r).exchange=a),disabled:t(f)=="add"},null,8,["modelValue","disabled"]),e(k,{style:{"margin-left":"10px"},type:"warning",onClick:U},{default:l(()=>[p("刷新")]),_:1})]),_:1}),e(_,{label:"扫码支付:"},{default:l(()=>[h("div",P,[e(A,{value:t(r).usdt,size:"200"},null,8,["value"])])]),_:1}),e(_,{label:"网络TRC20:"},{default:l(()=>[h("span",null,V(t(r).usdt),1)]),_:1}),e(_,{label:"上传凭证:",prop:"imgurl"},{default:l(()=>[e(I,{modelValue:t(r).imgurl,"onUpdate:modelValue":o[4]||(o[4]=a=>t(r).imgurl=a)},null,8,["modelValue"])]),_:1}),e(_,{label:"备注:",prop:"remark"},{default:l(()=>[e(C,{modelValue:t(r).remark,"onUpdate:modelValue":o[5]||(o[5]=a=>t(r).remark=a),type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])):b("",!0)]),_:1})}}};export{Z as default};
