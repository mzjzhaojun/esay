import{g as G,r as _,a as n,b as U,c,w as u,d as e,u as t,i,n as x,k as $,j as O}from"./index-857f4c92.js";const M={__name:"channel",setup(H){const{proxy:f}=G();let b=_({}),o=_({}),p=_(!1),y=_(""),R=_({name:[{required:!0,message:"请输入商户名称",trigger:"blur"}],code:[{required:!0,pattern:/^(\w){6,16}$/,message:"请设置6-16位字母、数字组合数字编码",trigger:"blur"}],exchange:[{required:!0,message:"请输入汇率",trigger:"blur"}],onecost:[{required:!0,message:"请输入单笔手续费",trigger:"blur"}],nikname:[{required:!0,message:"请输入商户标签",trigger:"blur"}],username:[{required:!0,message:"请输入设置商户登录账号",trigger:"blur"}],password:[{required:!0,message:"请输入设置商户密码",trigger:"blur"}],downpoint:[{required:!0,message:"请输入设置商户密码",trigger:"blur"}],min:[{required:!0,message:"请输入单笔限额",trigger:"blur"}],apikey:[{required:!0,message:"请输入设置apikey",trigger:"blur"}],apiip:[{required:!0,message:"请输入设置api地址",trigger:"blur"}],weight:[{required:!0,message:"请输入权重数",trigger:"blur"}]});function V(){f.$refs.baseTableRef.refresh()}function T(){o.value={status:!0,balancesynch:!0,firstmatch:!1},y.value="add",p.value=!0}function j(m){o.value=Object.assign({},m),y.value="update",p.value=!0}async function D(m){let a=await f.$api.channel.delete(m.id);V(),f.submitOk(a.message)}function F(){f.$refs.dataFormRef.validate(async m=>{if(m){let a=await f.$api.channel[o.value.id?"update":"add"](o.value);f.submitOk(a.message),V(),p.value=!1}})}return(m,a)=>{const C=n("base-input"),w=n("el-col"),L=n("base-select-no"),g=n("el-button"),N=n("el-row"),B=n("base-header"),s=n("el-table-column"),S=n("base-switch"),q=n("el-tag"),A=n("base-delete-btn"),I=n("base-table-p"),K=n("base-content"),r=n("base-input-no"),d=n("el-form-item"),k=n("base-radio-group"),Q=n("el-form"),z=n("base-dialog"),E=n("base-wrapper");return U(),c(E,null,{default:u(()=>[e(B,null,{default:u(()=>[e(N,null,{default:u(()=>[e(w,{span:4.5},{default:u(()=>[e(C,{modelValue:t(b).name,"onUpdate:modelValue":a[0]||(a[0]=l=>t(b).name=l),label:"渠道名称",onClear:V},null,8,["modelValue"])]),_:1}),e(w,{span:4.5},{default:u(()=>[e(C,{modelValue:t(b).code,"onUpdate:modelValue":a[1]||(a[1]=l=>t(b).code=l),label:"渠道编码",onClear:V},null,8,["modelValue"])]),_:1}),e(L,{modelValue:t(b).status,"onUpdate:modelValue":a[2]||(a[2]=l=>t(b).status=l),label:"状态","tag-type":"success",onClear:V,style:{"margin-right":"10px"},clearable:"","option-props":{label:"name",value:"value"},dataList:m.statusList},null,8,["modelValue","dataList"]),e(w,{span:4.5},{default:u(()=>[e(g,{type:"primary",onClick:V},{default:u(()=>[i("查询")]),_:1}),e(g,{type:"success",onClick:T},{default:u(()=>[i("添加")]),_:1})]),_:1})]),_:1})]),_:1}),e(K,null,{default:u(()=>[e(I,{ref:"baseTableRef",api:"channel.page",params:t(b),indexCode:!0},{default:u(()=>[e(s,{label:"渠道名称",prop:"name"}),e(s,{label:"标签",prop:"nkname"}),e(s,{label:"备注",prop:"remark"}),e(s,{label:"编码",prop:"code"}),e(s,{label:"状态"},{default:u(l=>[e(S,{modelValue:l.row.status,"onUpdate:modelValue":v=>l.row.status=v,api:"channel.update",params:{id:l.row.id,status:!l.row.status}},null,8,["modelValue","onUpdate:modelValue","params"])]),_:1}),e(s,{label:"渠道余额",prop:"balance"}),e(s,{label:"汇率",prop:"exchange"},{default:u(l=>[l.row.exchange?(U(),c(q,{key:0,type:"success"},{default:u(()=>[i(x(l.row.exchange)+"%",1)]),_:2},1024)):$("",!0)]),_:1}),e(s,{label:"单笔手续费",prop:"onecost"}),e(s,{label:"下浮点数",prop:"downpoint"}),e(s,{label:"成本汇率",prop:"costexchange"}),e(s,{label:"限额",prop:"min"},{default:u(l=>[l.row.min?(U(),c(q,{key:0,type:"danger"},{default:u(()=>[i(x(l.row.min)+"-"+x(l.row.max),1)]),_:2},1024)):$("",!0)]),_:1}),e(s,{label:"创建时间",prop:"create_time"}),e(s,{label:"操作"},{default:u(l=>[e(g,{type:"primary",link:"",onClick:v=>j(l.row)},{default:u(()=>[i("编辑")]),_:2},1032,["onClick"]),e(A,{onOk:v=>D(l.row)},null,8,["onOk"])]),_:1})]),_:1},8,["params"])]),_:1}),e(z,{modelValue:t(p),"onUpdate:modelValue":a[22]||(a[22]=l=>O(p)?p.value=l:p=l),title:m.dialogTitleObj[t(y)],width:"47%"},{footer:u(()=>[e(g,{onClick:a[21]||(a[21]=l=>O(p)?p.value=!1:p=!1)},{default:u(()=>[i("取 消")]),_:1}),e(g,{type:"primary",onClick:F},{default:u(()=>[i("确 定")]),_:1})]),default:u(()=>[e(Q,{inline:!0,ref:"dataFormRef",rules:t(R),model:t(o),"label-width":"100px"},{default:u(()=>[e(d,{label:"渠道名称:",prop:"name"},{default:u(()=>[e(r,{modelValue:t(o).name,"onUpdate:modelValue":a[3]||(a[3]=l=>t(o).name=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"单笔限额:",prop:"min"},{default:u(()=>[e(r,{modelValue:t(o).min,"onUpdate:modelValue":a[4]||(a[4]=l=>t(o).min=l),style:{width:"105px"}},null,8,["modelValue"]),i(" -- "),e(r,{modelValue:t(o).max,"onUpdate:modelValue":a[5]||(a[5]=l=>t(o).max=l),style:{width:"105px"}},null,8,["modelValue"])]),_:1}),e(d,{label:"渠道编码:",prop:"code"},{default:u(()=>[e(r,{modelValue:t(o).code,"onUpdate:modelValue":a[6]||(a[6]=l=>t(o).code=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"api地址",prop:"apiip"},{default:u(()=>[e(r,{modelValue:t(o).apiip,"onUpdate:modelValue":a[7]||(a[7]=l=>t(o).apiip=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"渠道标签:",prop:"nkname"},{default:u(()=>[e(r,{modelValue:t(o).nkname,"onUpdate:modelValue":a[8]||(a[8]=l=>t(o).nkname=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"apiKey:",prop:"apikey"},{default:u(()=>[e(r,{modelValue:t(o).apikey,"onUpdate:modelValue":a[9]||(a[9]=l=>t(o).apikey=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"通知地址:",prop:"apireusultip"},{default:u(()=>[e(r,{modelValue:t(o).apireusultip,"onUpdate:modelValue":a[10]||(a[10]=l=>t(o).apireusultip=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"汇率:",prop:"exchange"},{default:u(()=>[e(r,{modelValue:t(o).exchange,"onUpdate:modelValue":a[11]||(a[11]=l=>t(o).exchange=l),onkeyup:"value=value.replace(/[^\\d.]/g,'')"},null,8,["modelValue"])]),_:1}),e(d,{label:"单笔手续费:",prop:"onecost"},{default:u(()=>[e(r,{modelValue:t(o).onecost,"onUpdate:modelValue":a[12]||(a[12]=l=>t(o).onecost=l),onkeyup:"value=value.replace(/[^\\d.]/g,'')"},null,8,["modelValue"])]),_:1}),e(d,{label:"状态:"},{default:u(()=>[e(k,{modelValue:t(o).status,"onUpdate:modelValue":a[13]||(a[13]=l=>t(o).status=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"汇率浮动:",prop:"downpoint"},{default:u(()=>[e(r,{modelValue:t(o).downpoint,"onUpdate:modelValue":a[14]||(a[14]=l=>t(o).downpoint=l),onkeyup:"value=value.replace(/[^\\d.]/g,'')"},null,8,["modelValue"])]),_:1}),e(d,{label:"关闭余额同步:"},{default:u(()=>[e(k,{modelValue:t(o).balancesynch,"onUpdate:modelValue":a[15]||(a[15]=l=>t(o).balancesynch=l),"data-type":"yes"},null,8,["modelValue"])]),_:1}),e(d,{label:"匹配权重:",prop:"weight"},{default:u(()=>[e(r,{modelValue:t(o).weight,"onUpdate:modelValue":a[16]||(a[16]=l=>t(o).weight=l),onkeyup:"value=value.replace(/[^\\d.]/g,'')"},null,8,["modelValue"])]),_:1}),e(d,{label:"是否优先匹配:"},{default:u(()=>[e(k,{modelValue:t(o).firstmatch,"onUpdate:modelValue":a[17]||(a[17]=l=>t(o).firstmatch=l),"data-type":"yes"},null,8,["modelValue"])]),_:1}),e(d,{label:"匹配规则:"},{default:u(()=>[e(r,{modelValue:t(o).firstmatchmoney,"onUpdate:modelValue":a[18]||(a[18]=l=>t(o).firstmatchmoney=l),type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(d,{label:"分钟订单:"},{default:u(()=>[e(r,{modelValue:t(o).mtorder,"onUpdate:modelValue":a[19]||(a[19]=l=>t(o).mtorder=l),onkeyup:"value=value.replace(/[^\\d.]/g,'')"},null,8,["modelValue"])]),_:1}),e(d,{label:"备注:"},{default:u(()=>[e(r,{modelValue:t(o).remark,"onUpdate:modelValue":a[20]||(a[20]=l=>t(o).remark=l),type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])]),_:1})}}};export{M as default};
