import{g as J,r as V,a as o,b as i,c as _,w as l,d as e,u as t,i as p,n as k,k as b,e as C,m as K,j as $}from"./index-995db30f.js";const P=["src"],W={style:{"text-align":"center"}},ee={__name:"merchantorder",setup(X){const{proxy:d}=J();let O=d.$store.user.useUserStore();const{userObj:R}=O;let r=V({}),m=V(!1),f=V(""),g=V({userid:R.id}),T=V({imgurl:[{required:!0,message:"请上传支付凭证",trigger:"blur"}],amount:[{required:!0,message:"请输入金额",trigger:"blur"}]});function y(){d.$refs.baseTableRef.refresh()}function B(){U(),S(),f.value="add",m.value=!0}async function U(){let s=await d.$api.payconfig.get();r.value=s.body,d.submitOk(s.message)}async function q(s){let n=await d.$api.merchantaccountorder.cancle(s.id);d.submitOk(n.message),y()}function N(){d.$refs.dataFormRef.validate(async s=>{if(s){r.value.id=null;let n=await d.$api.merchantaccountorder.add(r.value);d.submitOk(n.message),y(),m.value=!1}})}async function S(){let s=await d.$api.merchant.getdata();r.value.merchantexchange=s.body.downpoint}return(s,n)=>{const j=o("base-input"),v=o("el-col"),D=o("base-select-no"),w=o("el-button"),F=o("el-row"),L=o("base-header"),u=o("el-table-column"),h=o("el-tag"),E=o("base-confirm-btn"),z=o("base-table-p"),A=o("base-content"),x=o("base-input-no"),c=o("el-form-item"),I=o("base-qrcode"),M=o("base-upload-single"),Q=o("el-form"),G=o("base-dialog"),H=o("base-wrapper");return i(),_(H,null,{default:l(()=>[e(L,null,{default:l(()=>[e(F,null,{default:l(()=>[e(v,{span:4.5},{default:l(()=>[e(j,{modelValue:t(g).nikname,"onUpdate:modelValue":n[0]||(n[0]=a=>t(g).nikname=a),label:"充值金额",onClear:y},null,8,["modelValue"])]),_:1}),e(v,{span:4.5},{default:l(()=>[e(D,{modelValue:t(g).status,"onUpdate:modelValue":n[1]||(n[1]=a=>t(g).status=a),label:"状态","tag-type":"success",onClear:y,style:{"margin-right":"10px"},clearable:"","option-props":{label:"name",value:"value"},dataList:s.statusList},null,8,["modelValue","dataList"])]),_:1}),e(v,{span:4.5},{default:l(()=>[e(w,{type:"primary",onClick:y},{default:l(()=>[p("查询")]),_:1}),e(w,{type:"success",onClick:B},{default:l(()=>[p("充值")]),_:1})]),_:1})]),_:1})]),_:1}),e(A,null,{default:l(()=>[e(z,{ref:"baseTableRef",api:"merchantaccountorder.page",params:t(g),indexCode:!0},{default:l(()=>[e(u,{label:"充值单号",prop:"ordernum",width:"180px;"}),e(u,{label:"商户名称",prop:"username"}),e(u,{label:"商户编码",prop:"merchantcode"}),e(u,{label:"标签",prop:"nkname"}),e(u,{label:"充值U金额",prop:"amount"}),e(u,{label:"充值汇率",prop:"exchange"},{default:l(a=>[a.row.exchange?(i(),_(h,{key:0,type:"danger"},{default:l(()=>[p(k(a.row.exchange),1)]),_:2},1024)):b("",!0)]),_:1}),e(u,{label:"充值汇率浮动",prop:"merchantexchange"},{default:l(a=>[a.row.merchantexchange?(i(),_(h,{key:0,type:"danger"},{default:l(()=>[p(k(a.row.merchantexchange),1)]),_:2},1024)):b("",!0)]),_:1}),e(u,{label:"到账RMB金额",prop:"amountreceived"},{default:l(a=>[a.row.amountreceived?(i(),_(h,{key:0,type:"success"},{default:l(()=>[p(k(a.row.amountreceived),1)]),_:2},1024)):b("",!0)]),_:1}),e(u,{label:"状态"},{default:l(a=>[a.row.statusname?(i(),_(h,{key:0},{default:l(()=>[p(k(a.row.statusname),1)]),_:2},1024)):b("",!0)]),_:1}),e(u,{label:"支付凭证",prop:"imgurl"},{default:l(a=>[C("span",null,[a.row.imgurl?(i(),K("img",{key:0,src:a.row.imgurl,alt:"",class:"img-sm"},null,8,P)):b("",!0)])]),_:1}),e(u,{label:"创建时间",prop:"create_time"}),e(u,{label:"备注",prop:"remark",width:"280"}),e(u,{label:"操作",width:"100"},{default:l(a=>[a.row.status==10?(i(),_(E,{key:0,type:"success",onOk:Y=>q(a.row),label:"取消"},null,8,["onOk"])):b("",!0)]),_:1})]),_:1},8,["params"])]),_:1}),t(f)==="add"||t(f)==="update"?(i(),_(G,{key:0,modelValue:t(m),"onUpdate:modelValue":n[8]||(n[8]=a=>$(m)?m.value=a:m=a),title:s.dialogTitleObj[t(f)],width:"26%"},{footer:l(()=>[e(w,{onClick:n[7]||(n[7]=a=>$(m)?m.value=!1:m=!1)},{default:l(()=>[p("取 消")]),_:1}),e(w,{type:"primary",onClick:N},{default:l(()=>[p("确 定")]),_:1})]),default:l(()=>[e(Q,{ref:"dataFormRef",rules:t(T),model:t(r),"label-width":"100px"},{default:l(()=>[e(c,{label:"充值金额:",prop:"amount"},{default:l(()=>[e(x,{modelValue:t(r).amount,"onUpdate:modelValue":n[2]||(n[2]=a=>t(r).amount=a)},null,8,["modelValue"])]),_:1}),e(c,{label:"充值汇率:"},{default:l(()=>[e(x,{modelValue:t(r).exchange,"onUpdate:modelValue":n[3]||(n[3]=a=>t(r).exchange=a),disabled:t(f)=="add"},null,8,["modelValue","disabled"]),e(w,{style:{"margin-left":"10px"},type:"warning",onClick:U},{default:l(()=>[p("刷新")]),_:1})]),_:1}),e(c,{label:"充值汇率浮动:",prop:"merchantexchange"},{default:l(()=>[e(x,{modelValue:t(r).merchantexchange,"onUpdate:modelValue":n[4]||(n[4]=a=>t(r).merchantexchange=a),disabled:t(f)=="add"},null,8,["modelValue","disabled"])]),_:1}),e(c,{label:"扫码支付:"},{default:l(()=>[C("div",W,[e(I,{value:t(r).usdt,size:"200"},null,8,["value"])])]),_:1}),e(c,{label:"网络TRC20:"},{default:l(()=>[C("span",null,k(t(r).usdt),1)]),_:1}),e(c,{label:"上传凭证:",prop:"imgurl"},{default:l(()=>[e(M,{modelValue:t(r).imgurl,"onUpdate:modelValue":n[5]||(n[5]=a=>t(r).imgurl=a)},null,8,["modelValue"])]),_:1}),e(c,{label:"备注:",prop:"remark"},{default:l(()=>[e(x,{modelValue:t(r).remark,"onUpdate:modelValue":n[6]||(n[6]=a=>t(r).remark=a),type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])):b("",!0)]),_:1})}}};export{ee as default};
