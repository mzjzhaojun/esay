import{g as H,r as _,a as u,b as U,c as x,w as n,d as e,u as t,i,n as v,k as O,j as R}from"./index-10d401b8.js";const P={__name:"channel",setup(J){const{proxy:f}=H();let b=_({}),o=_({}),p=_(!1),y=_(""),T=_({name:[{required:!0,message:"请输入商户名称",trigger:"blur"}],code:[{required:!0,pattern:/^(\w){6,16}$/,message:"请设置6-16位字母、数字组合数字编码",trigger:"blur"}],exchange:[{required:!0,message:"请输入汇率",trigger:"blur"}],onecost:[{required:!0,message:"请输入单笔手续费",trigger:"blur"}],nkname:[{required:!0,message:"请输入商户标签",trigger:"blur"}],username:[{required:!0,message:"请输入设置商户登录账号",trigger:"blur"}],password:[{required:!0,message:"请输入设置商户密码",trigger:"blur"}],downpoint:[{required:!0,message:"请输入设置商户密码",trigger:"blur"}],min:[{required:!0,message:"请输入单笔限额",trigger:"blur"}],apikey:[{required:!0,message:"请输入设置apikey",trigger:"blur"}],apiip:[{required:!0,message:"请输入设置api地址",trigger:"blur"}],weight:[{required:!0,message:"请设置权重数",trigger:"blur"}],apireusultip:[{required:!0,message:"请输入回调请求地址",trigger:"blur"}]});function g(){f.$refs.baseTableRef.refresh()}function j(){o.value={status:!0,balancesynch:!0,firstmatch:!1,downpoint:0,weight:1},y.value="add",p.value=!0}function D(m){o.value=Object.assign({},m),y.value="update",p.value=!0}async function F(m){let a=await f.$api.channel.delete(m.id);g(),f.submitOk(a.message)}function L(){f.$refs.dataFormRef.validate(async m=>{if(m){let a=await f.$api.channel[o.value.id?"update":"add"](o.value);f.submitOk(a.message),g(),p.value=!1}})}return(m,a)=>{const C=u("base-input"),w=u("el-col"),N=u("base-select-no"),V=u("el-button"),z=u("el-row"),B=u("base-header"),s=u("el-table-column"),S=u("base-switch"),q=u("el-tag"),A=u("base-delete-btn"),I=u("base-table-p"),K=u("base-content"),d=u("base-input-no"),r=u("el-form-item"),$=u("el-input-number"),k=u("base-radio-group"),Q=u("el-form"),E=u("base-dialog"),G=u("base-wrapper");return U(),x(G,null,{default:n(()=>[e(B,null,{default:n(()=>[e(z,null,{default:n(()=>[e(w,{span:4.5},{default:n(()=>[e(C,{modelValue:t(b).name,"onUpdate:modelValue":a[0]||(a[0]=l=>t(b).name=l),label:"渠道名称",onClear:g},null,8,["modelValue"])]),_:1}),e(w,{span:4.5},{default:n(()=>[e(C,{modelValue:t(b).code,"onUpdate:modelValue":a[1]||(a[1]=l=>t(b).code=l),label:"渠道编码",onClear:g},null,8,["modelValue"])]),_:1}),e(N,{modelValue:t(b).status,"onUpdate:modelValue":a[2]||(a[2]=l=>t(b).status=l),label:"状态","tag-type":"success",onClear:g,style:{"margin-right":"10px"},clearable:"","option-props":{label:"name",value:"value"},dataList:m.statusList},null,8,["modelValue","dataList"]),e(w,{span:4.5},{default:n(()=>[e(V,{type:"primary",onClick:g},{default:n(()=>[i("查询")]),_:1}),e(V,{type:"success",onClick:j},{default:n(()=>[i("添加")]),_:1})]),_:1})]),_:1})]),_:1}),e(K,null,{default:n(()=>[e(I,{ref:"baseTableRef",api:"channel.page",params:t(b),indexCode:!0},{default:n(()=>[e(s,{label:"渠道名称",prop:"name"}),e(s,{label:"标签",prop:"nkname"}),e(s,{label:"编码",prop:"code"}),e(s,{label:"状态"},{default:n(l=>[e(S,{modelValue:l.row.status,"onUpdate:modelValue":c=>l.row.status=c,api:"channel.update",params:{id:l.row.id,status:!l.row.status}},null,8,["modelValue","onUpdate:modelValue","params"])]),_:1}),e(s,{label:"渠道余额",prop:"balance"}),e(s,{label:"交易费率‰",prop:"exchange"},{default:n(l=>[l.row.exchange?(U(),x(q,{key:0,type:"success"},{default:n(()=>[i(v(l.row.exchange)+"‰",1)]),_:2},1024)):O("",!0)]),_:1}),e(s,{label:"单笔手续费",prop:"onecost"}),e(s,{label:"充值汇率浮动",prop:"downpoint"}),e(s,{label:"限额",prop:"min"},{default:n(l=>[l.row.min?(U(),x(q,{key:0,type:"danger"},{default:n(()=>[i(v(l.row.min)+"-"+v(l.row.max),1)]),_:2},1024)):O("",!0)]),_:1}),e(s,{label:"创建时间",prop:"create_time"}),e(s,{label:"备注",prop:"remark"}),e(s,{label:"操作"},{default:n(l=>[e(V,{type:"primary",link:"",onClick:c=>D(l.row)},{default:n(()=>[i("编辑")]),_:2},1032,["onClick"]),e(A,{onOk:c=>F(l.row)},null,8,["onOk"])]),_:1})]),_:1},8,["params"])]),_:1}),e(E,{modelValue:t(p),"onUpdate:modelValue":a[22]||(a[22]=l=>R(p)?p.value=l:p=l),title:m.dialogTitleObj[t(y)],width:"50%"},{footer:n(()=>[e(V,{onClick:a[21]||(a[21]=l=>R(p)?p.value=!1:p=!1)},{default:n(()=>[i("取 消")]),_:1}),e(V,{type:"primary",onClick:L},{default:n(()=>[i("确 定")]),_:1})]),default:n(()=>[e(Q,{inline:!0,ref:"dataFormRef",rules:t(T),model:t(o),"label-width":"120px"},{default:n(()=>[e(r,{label:"渠道名称:",prop:"name"},{default:n(()=>[e(d,{modelValue:t(o).name,"onUpdate:modelValue":a[3]||(a[3]=l=>t(o).name=l)},null,8,["modelValue"])]),_:1}),e(r,{label:"单笔限额:",prop:"min"},{default:n(()=>[e(d,{modelValue:t(o).min,"onUpdate:modelValue":a[4]||(a[4]=l=>t(o).min=l),label:"最小值",style:{width:"145px"}},null,8,["modelValue"]),i(" - "),e(d,{modelValue:t(o).max,"onUpdate:modelValue":a[5]||(a[5]=l=>t(o).max=l),label:"最大值",style:{width:"145px"}},null,8,["modelValue"])]),_:1}),e(r,{label:"渠道编码:",prop:"code"},{default:n(()=>[e(d,{modelValue:t(o).code,"onUpdate:modelValue":a[6]||(a[6]=l=>t(o).code=l)},null,8,["modelValue"])]),_:1}),e(r,{label:"api地址",prop:"apiip"},{default:n(()=>[e(d,{modelValue:t(o).apiip,"onUpdate:modelValue":a[7]||(a[7]=l=>t(o).apiip=l)},null,8,["modelValue"])]),_:1}),e(r,{label:"渠道标签:",prop:"nkname"},{default:n(()=>[e(d,{modelValue:t(o).nkname,"onUpdate:modelValue":a[8]||(a[8]=l=>t(o).nkname=l)},null,8,["modelValue"])]),_:1}),e(r,{label:"apiKey:",prop:"apikey"},{default:n(()=>[e(d,{modelValue:t(o).apikey,"onUpdate:modelValue":a[9]||(a[9]=l=>t(o).apikey=l)},null,8,["modelValue"])]),_:1}),e(r,{label:"通知地址:",prop:"apireusultip"},{default:n(()=>[e(d,{modelValue:t(o).apireusultip,"onUpdate:modelValue":a[10]||(a[10]=l=>t(o).apireusultip=l)},null,8,["modelValue"])]),_:1}),e(r,{label:"交易费率:",prop:"exchange"},{default:n(()=>[e(d,{modelValue:t(o).exchange,"onUpdate:modelValue":a[11]||(a[11]=l=>t(o).exchange=l),tip:"‰",label:"千分比1-100整数",onkeyup:"value=value.replace(/[^\\d.]/g,'')"},null,8,["modelValue"])]),_:1}),e(r,{label:"匹配权重:",prop:"weight"},{default:n(()=>[e($,{modelValue:t(o).weight,"onUpdate:modelValue":a[12]||(a[12]=l=>t(o).weight=l),min:1,max:10,"controls-position":"right",size:"default"},null,8,["modelValue"])]),_:1}),e(r,{label:"单笔手续费:",prop:"onecost"},{default:n(()=>[e(d,{modelValue:t(o).onecost,"onUpdate:modelValue":a[13]||(a[13]=l=>t(o).onecost=l),onkeyup:"value=value.replace(/[^\\d.]/g,'')"},null,8,["modelValue"])]),_:1}),e(r,{label:"充值汇率浮动:",prop:"downpoint"},{default:n(()=>[e($,{modelValue:t(o).downpoint,"onUpdate:modelValue":a[14]||(a[14]=l=>t(o).downpoint=l),precision:2,min:-.3,max:.3,step:.01,"controls-position":"right",size:"default"},null,8,["modelValue"])]),_:1}),e(r,{label:"状态:"},{default:n(()=>[e(k,{modelValue:t(o).status,"onUpdate:modelValue":a[15]||(a[15]=l=>t(o).status=l)},null,8,["modelValue"])]),_:1}),e(r,{label:"分钟订单:"},{default:n(()=>[e(d,{modelValue:t(o).mtorder,"onUpdate:modelValue":a[16]||(a[16]=l=>t(o).mtorder=l),onkeyup:"value=value.replace(/[^\\d.]/g,'')"},null,8,["modelValue"])]),_:1}),e(r,{label:"关闭余额同步:"},{default:n(()=>[e(k,{modelValue:t(o).balancesynch,"onUpdate:modelValue":a[17]||(a[17]=l=>t(o).balancesynch=l),"data-type":"yes"},null,8,["modelValue"])]),_:1}),e(r,{label:"匹配规则:"},{default:n(()=>[e(d,{modelValue:t(o).firstmatchmoney,"onUpdate:modelValue":a[18]||(a[18]=l=>t(o).firstmatchmoney=l),type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(r,{label:"是否优先匹配:"},{default:n(()=>[e(k,{modelValue:t(o).firstmatch,"onUpdate:modelValue":a[19]||(a[19]=l=>t(o).firstmatch=l),"data-type":"yes"},null,8,["modelValue"])]),_:1}),e(r,{label:"备注:"},{default:n(()=>[e(d,{modelValue:t(o).remark,"onUpdate:modelValue":a[20]||(a[20]=l=>t(o).remark=l),type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])]),_:1})}}};export{P as default};
