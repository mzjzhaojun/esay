import{g as E,r as g,a as u,b as C,c as h,w as t,d as e,u as o,i as p,j as w,k as T}from"./index-55143ade.js";const W={__name:"tgmerchantgroup",setup(H){const{proxy:i}=E();let b=g({}),r=g({}),V=g({}),n=g(!1),f=g(""),O=g({merchantname:[{required:!0,message:"请输入商户名称",trigger:"blur"}],merchantcode:[{required:!0,message:"请输入商户标签",trigger:"blur"}],tggroupname:[{required:!0,message:"请输入商户群名",trigger:"blur"}]});function _(){i.$refs.baseTableRef.refresh()}function R(){r.value={status:!0},f.value="add",n.value=!0}function j(s){r.value=Object.assign({},s),f.value="update",n.value=!0}function L(s){V.value=Object.assign({id:s.id,version:s.version}),f.value="merchant",n.value=!0}async function q(s){let l=await i.$api.tgmerchantgroup.delete(s.id);_(),i.submitOk(l.message)}function F(){i.$refs.dataFormRef.validate(async s=>{if(s){let l=await i.$api.tgmerchantgroup[r.value.id?"update":"add"](r.value);i.submitOk(l.message),_(),n.value=!1}})}async function N(){let s=await i.$api.tgmerchantgroup.putmerchant(V.value);i.submitOk(s.message),_(),n.value=!1}function J(s){}return(s,l)=>{const U=u("base-input"),y=u("el-col"),B=u("base-select-no"),d=u("el-button"),D=u("el-row"),G=u("base-header"),m=u("el-table-column"),M=u("base-switch"),A=u("base-delete-btn"),I=u("base-table-p"),P=u("base-content"),v=u("base-input-no"),c=u("el-form-item"),Q=u("base-radio-group"),x=u("el-form"),$=u("base-dialog"),S=u("base-cascader-no"),z=u("base-wrapper");return C(),h(z,null,{default:t(()=>[e(G,null,{default:t(()=>[e(D,null,{default:t(()=>[e(y,{span:4.5},{default:t(()=>[e(U,{modelValue:o(b).name,"onUpdate:modelValue":l[0]||(l[0]=a=>o(b).name=a),label:"商户名称",onClear:_},null,8,["modelValue"])]),_:1}),e(y,{span:4.5},{default:t(()=>[e(U,{modelValue:o(b).nkname,"onUpdate:modelValue":l[1]||(l[1]=a=>o(b).nkname=a),label:"商户标签",onClear:_},null,8,["modelValue"])]),_:1}),e(B,{modelValue:o(b).status,"onUpdate:modelValue":l[2]||(l[2]=a=>o(b).status=a),label:"状态","tag-type":"success",onClear:_,style:{"margin-right":"10px"},clearable:"","option-props":{label:"name",value:"value"},dataList:s.statusList},null,8,["modelValue","dataList"]),e(y,{span:4.5},{default:t(()=>[e(d,{type:"primary",onClick:_},{default:t(()=>[p("查询")]),_:1}),e(d,{type:"success",onClick:R},{default:t(()=>[p("添加")]),_:1})]),_:1})]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(I,{ref:"baseTableRef",api:"tgmerchantgroup.page",params:o(b),indexCode:!0},{default:t(()=>[e(m,{label:"商户名称",prop:"merchantname"}),e(m,{label:"商户TG标签",prop:"merchantcode"}),e(m,{label:"状态"},{default:t(a=>[e(M,{modelValue:a.row.status,"onUpdate:modelValue":k=>a.row.status=k,api:"tgmerchantgroup.update",params:{id:a.row.id,status:!a.row.status}},null,8,["modelValue","onUpdate:modelValue","params"])]),_:1}),e(m,{label:"Tg-id",prop:"tgid"}),e(m,{label:"Tg-群名称",prop:"tggroupname"}),e(m,{label:"商户管理员",prop:"mangers"}),e(m,{label:"备注",prop:"remark"}),e(m,{label:"创建时间",prop:"create_time"}),e(m,{label:"操作"},{default:t(a=>[e(d,{type:"primary",link:"",onClick:k=>j(a.row)},{default:t(()=>[p("编辑")]),_:2},1032,["onClick"]),e(d,{type:"success",link:"",onClick:k=>(a.row,void 0)},{default:t(()=>[p("设置标签")]),_:2},1032,["onClick"]),e(d,{type:"warning",link:"",onClick:k=>L(a.row)},{default:t(()=>[p("设置商户")]),_:2},1032,["onClick"]),e(A,{onOk:k=>q(a.row)},null,8,["onOk"])]),_:1})]),_:1},8,["params"])]),_:1}),o(f)==="add"||o(f)==="update"?(C(),h($,{key:0,modelValue:o(n),"onUpdate:modelValue":l[9]||(l[9]=a=>w(n)?n.value=a:n=a),title:s.dialogTitleObj[o(f)],width:"23%"},{footer:t(()=>[e(d,{onClick:l[8]||(l[8]=a=>w(n)?n.value=!1:n=!1)},{default:t(()=>[p("取 消")]),_:1}),e(d,{type:"primary",onClick:F},{default:t(()=>[p("确 定")]),_:1})]),default:t(()=>[e(x,{inline:!0,ref:"dataFormRef",rules:o(O),model:o(r),"label-width":"100px"},{default:t(()=>[e(c,{label:"商户TG标签:",prop:"merchantcode"},{default:t(()=>[e(v,{modelValue:o(r).merchantcode,"onUpdate:modelValue":l[3]||(l[3]=a=>o(r).merchantcode=a)},null,8,["modelValue"])]),_:1}),e(c,{label:"商户群名称:",prop:"tggroupname"},{default:t(()=>[e(v,{modelValue:o(r).tggroupname,"onUpdate:modelValue":l[4]||(l[4]=a=>o(r).tggroupname=a)},null,8,["modelValue"])]),_:1}),e(c,{label:"商户管理员:",prop:"mangers"},{default:t(()=>[e(v,{modelValue:o(r).mangers,"onUpdate:modelValue":l[5]||(l[5]=a=>o(r).mangers=a)},null,8,["modelValue"])]),_:1}),e(c,{label:"状态:",prop:"status"},{default:t(()=>[e(Q,{modelValue:o(r).status,"onUpdate:modelValue":l[6]||(l[6]=a=>o(r).status=a)},null,8,["modelValue"])]),_:1}),e(c,{label:"备注:"},{default:t(()=>[e(v,{modelValue:o(r).remark,"onUpdate:modelValue":l[7]||(l[7]=a=>o(r).remark=a),type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])):T("",!0),o(f)==="merchant"?(C(),h($,{key:1,modelValue:o(n),"onUpdate:modelValue":l[13]||(l[13]=a=>w(n)?n.value=a:n=a),title:"设置商户",width:"25%"},{footer:t(()=>[e(d,{onClick:l[11]||(l[11]=a=>w(n)?n.value=!1:n=!1)},{default:t(()=>[p("取消")]),_:1}),e(d,{type:"primary",onClick:l[12]||(l[12]=a=>N())},{default:t(()=>[p("确定")]),_:1})]),default:t(()=>[e(x,{inline:!0,model:o(V),"label-width":"70px"},{default:t(()=>[e(c,{label:"商户:"},{default:t(()=>[e(S,{modelValue:o(V).merchantid,"onUpdate:modelValue":l[10]||(l[10]=a=>o(V).merchantid=a),style:{"margin-right":"10px"},clearable:"",props:{value:"id",label:"name",emitPath:!1},api:"merchant.list"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])):T("",!0)]),_:1})}}};export{W as default};
