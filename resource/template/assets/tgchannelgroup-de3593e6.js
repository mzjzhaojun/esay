import{g as E,r as c,a as u,b as C,c as h,w as t,d as e,u as n,i as p,j as w,k as T}from"./index-e96609df.js";const W={__name:"tgchannelgroup",setup(H){const{proxy:i}=E();let b=c({}),s=c({}),V=c({}),o=c(!1),f=c(""),O=c({merchantname:[{required:!0,message:"请输入商户名称",trigger:"blur"}],merchantcode:[{required:!0,message:"请输入商户标签",trigger:"blur"}],tggroupname:[{required:!0,message:"请输入商户群名",trigger:"blur"}]});function _(){i.$refs.baseTableRef.refresh()}function R(){s.value={status:!0},f.value="add",o.value=!0}function j(r){s.value=Object.assign({},r),f.value="update",o.value=!0}function L(r){V.value=Object.assign({id:r.id,version:r.version}),f.value="merchant",o.value=!0}async function q(r){let a=await i.$api.agent.tgmerchantgroup(r.id);_(),i.submitOk(a.message)}function F(){i.$refs.dataFormRef.validate(async r=>{if(r){let a=await i.$api.tgchannelgroup[s.value.id?"update":"add"](s.value);i.submitOk(a.message),_(),o.value=!1}})}async function N(){let r=await i.$api.tgchannelgroup.putchannel(V.value);i.submitOk(r.message),_(),o.value=!1}function J(r){}return(r,a)=>{const U=u("base-input"),y=u("el-col"),B=u("base-select-no"),d=u("el-button"),D=u("el-row"),G=u("base-header"),m=u("el-table-column"),M=u("base-switch"),A=u("base-delete-btn"),I=u("base-table-p"),P=u("base-content"),v=u("base-input-no"),g=u("el-form-item"),Q=u("base-radio-group"),x=u("el-form"),$=u("base-dialog"),S=u("base-cascader-no"),z=u("base-wrapper");return C(),h(z,null,{default:t(()=>[e(G,null,{default:t(()=>[e(D,null,{default:t(()=>[e(y,{span:4.5},{default:t(()=>[e(U,{modelValue:n(b).name,"onUpdate:modelValue":a[0]||(a[0]=l=>n(b).name=l),label:"渠道名称",onClear:_},null,8,["modelValue"])]),_:1}),e(y,{span:4.5},{default:t(()=>[e(U,{modelValue:n(b).nkname,"onUpdate:modelValue":a[1]||(a[1]=l=>n(b).nkname=l),label:"渠道标签",onClear:_},null,8,["modelValue"])]),_:1}),e(B,{modelValue:n(b).status,"onUpdate:modelValue":a[2]||(a[2]=l=>n(b).status=l),label:"状态","tag-type":"success",onClear:_,style:{"margin-right":"10px"},clearable:"","option-props":{label:"name",value:"value"},dataList:r.statusList},null,8,["modelValue","dataList"]),e(y,{span:4.5},{default:t(()=>[e(d,{type:"primary",onClick:_},{default:t(()=>[p("查询")]),_:1}),e(d,{type:"success",onClick:R},{default:t(()=>[p("添加")]),_:1})]),_:1})]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(I,{ref:"baseTableRef",api:"tgchannelgroup.page",params:n(b),indexCode:!0},{default:t(()=>[e(m,{label:"渠道名称",prop:"channelname"}),e(m,{label:"渠道TG标签",prop:"channelnkname"}),e(m,{label:"状态"},{default:t(l=>[e(M,{modelValue:l.row.status,"onUpdate:modelValue":k=>l.row.status=k,api:"tgchannelgroup.update",params:{id:l.row.id,status:!l.row.status}},null,8,["modelValue","onUpdate:modelValue","params"])]),_:1}),e(m,{label:"Tg-id",prop:"tgid"}),e(m,{label:"Tg-群名称",prop:"tggroupname"}),e(m,{label:"渠道管理员",prop:"mangers"}),e(m,{label:"备注",prop:"remark"}),e(m,{label:"创建时间",prop:"create_time"}),e(m,{label:"操作"},{default:t(l=>[e(d,{type:"primary",link:"",onClick:k=>j(l.row)},{default:t(()=>[p("编辑")]),_:2},1032,["onClick"]),e(d,{type:"success",link:"",onClick:k=>(l.row,void 0)},{default:t(()=>[p("设置标签")]),_:2},1032,["onClick"]),e(d,{type:"warning",link:"",onClick:k=>L(l.row)},{default:t(()=>[p("设置渠道")]),_:2},1032,["onClick"]),e(A,{onOk:k=>q(l.row)},null,8,["onOk"])]),_:1})]),_:1},8,["params"])]),_:1}),n(f)==="add"||n(f)==="update"?(C(),h($,{key:0,modelValue:n(o),"onUpdate:modelValue":a[9]||(a[9]=l=>w(o)?o.value=l:o=l),title:r.dialogTitleObj[n(f)],width:"23%"},{footer:t(()=>[e(d,{onClick:a[8]||(a[8]=l=>w(o)?o.value=!1:o=!1)},{default:t(()=>[p("取 消")]),_:1}),e(d,{type:"primary",onClick:F},{default:t(()=>[p("确 定")]),_:1})]),default:t(()=>[e(x,{inline:!0,ref:"dataFormRef",rules:n(O),model:n(s),"label-width":"100px"},{default:t(()=>[e(g,{label:"渠道TG标签:",prop:"channelnkname"},{default:t(()=>[e(v,{modelValue:n(s).channelnkname,"onUpdate:modelValue":a[3]||(a[3]=l=>n(s).channelnkname=l)},null,8,["modelValue"])]),_:1}),e(g,{label:"渠道群名称:",prop:"tggroupname"},{default:t(()=>[e(v,{modelValue:n(s).tggroupname,"onUpdate:modelValue":a[4]||(a[4]=l=>n(s).tggroupname=l)},null,8,["modelValue"])]),_:1}),e(g,{label:"渠道管理员:",prop:"mangers"},{default:t(()=>[e(v,{modelValue:n(s).mangers,"onUpdate:modelValue":a[5]||(a[5]=l=>n(s).mangers=l)},null,8,["modelValue"])]),_:1}),e(g,{label:"状态:",prop:"status"},{default:t(()=>[e(Q,{modelValue:n(s).status,"onUpdate:modelValue":a[6]||(a[6]=l=>n(s).status=l)},null,8,["modelValue"])]),_:1}),e(g,{label:"备注:"},{default:t(()=>[e(v,{modelValue:n(s).remark,"onUpdate:modelValue":a[7]||(a[7]=l=>n(s).remark=l),type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])):T("",!0),n(f)==="merchant"?(C(),h($,{key:1,modelValue:n(o),"onUpdate:modelValue":a[13]||(a[13]=l=>w(o)?o.value=l:o=l),title:"设置渠道",width:"25%"},{footer:t(()=>[e(d,{onClick:a[11]||(a[11]=l=>w(o)?o.value=!1:o=!1)},{default:t(()=>[p("取消")]),_:1}),e(d,{type:"primary",onClick:a[12]||(a[12]=l=>N())},{default:t(()=>[p("确定")]),_:1})]),default:t(()=>[e(x,{inline:!0,model:n(V),"label-width":"70px"},{default:t(()=>[e(g,{label:"商户:"},{default:t(()=>[e(S,{modelValue:n(V).channelid,"onUpdate:modelValue":a[10]||(a[10]=l=>n(V).channelid=l),style:{"margin-right":"10px"},clearable:"",props:{value:"id",label:"name",emitPath:!1},api:"channel.list"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])):T("",!0)]),_:1})}}};export{W as default};
