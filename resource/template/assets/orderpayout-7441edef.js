import{g as E,r as C,a as u,b as V,c as f,w as n,d as l,u as o,i as s,n as y,k as _,j as R}from"./index-55143ade.js";const J={__name:"orderpayout",setup(G){const{proxy:g}=E();g.$store.user.useUserStore();let t=C({}),b=C({}),p=C(!1),k=C("");function m(){g.$refs.baseTableRef.refresh()}function T(i){b.value={id:i.id},k.value="add",p.value=!0}function B(){g.$refs.dataFormRef.validate(async i=>{if(i){let a=await g.$api.payout.callbackpay(b.value);g.submitOk(a.message),m(),p.value=!1}})}return(i,a)=>{const r=u("base-input"),c=u("base-input-no"),U=u("el-col"),v=u("el-row"),F=u("base-select-no"),L=u("base-datetime"),N=u("base-datetime-no"),w=u("el-button"),S=u("base-header"),d=u("el-table-column"),x=u("el-tag"),j=u("el-image"),D=u("base-table-p"),O=u("base-content"),z=u("base-upload-single"),$=u("el-form-item"),A=u("el-form"),I=u("base-dialog"),Q=u("base-wrapper");return V(),f(Q,null,{default:n(()=>[l(S,null,{default:n(()=>[l(v,null,{default:n(()=>[l(U,null,{default:n(()=>[l(r,{modelValue:o(t).name,"onUpdate:modelValue":a[0]||(a[0]=e=>o(t).name=e),label:"商户名称",onClear:m},null,8,["modelValue"]),l(r,{modelValue:o(t).code,"onUpdate:modelValue":a[1]||(a[1]=e=>o(t).code=e),label:"商户编码",onClear:m},null,8,["modelValue"]),l(r,{modelValue:o(t).name,"onUpdate:modelValue":a[2]||(a[2]=e=>o(t).name=e),label:"渠道名称",onClear:m},null,8,["modelValue"]),l(r,{modelValue:o(t).agentname,"onUpdate:modelValue":a[3]||(a[3]=e=>o(t).agentname=e),label:"渠道单号",onClear:m},null,8,["modelValue"]),l(r,{modelValue:o(t).name,"onUpdate:modelValue":a[4]||(a[4]=e=>o(t).name=e),label:"区间金额",onClear:m,style:{width:"105px"}},null,8,["modelValue"]),s("- "),l(c,{modelValue:o(t).name,"onUpdate:modelValue":a[5]||(a[5]=e=>o(t).name=e),style:{width:"105px"}},null,8,["modelValue"])]),_:1})]),_:1}),l(v,null,{default:n(()=>[l(U,null,{default:n(()=>[l(r,{modelValue:o(t).nikname,"onUpdate:modelValue":a[6]||(a[6]=e=>o(t).nikname=e),label:"通道名称",onClear:m},null,8,["modelValue"]),l(r,{modelValue:o(t).code,"onUpdate:modelValue":a[7]||(a[7]=e=>o(t).code=e),label:"系统单号",onClear:m},null,8,["modelValue"]),l(r,{modelValue:o(t).nikname,"onUpdate:modelValue":a[8]||(a[8]=e=>o(t).nikname=e),label:"代理名称",onClear:m},null,8,["modelValue"]),l(r,{modelValue:o(t).nikname,"onUpdate:modelValue":a[9]||(a[9]=e=>o(t).nikname=e),label:"账户名称",onClear:m},null,8,["modelValue"]),l(r,{modelValue:o(t).code,"onUpdate:modelValue":a[10]||(a[10]=e=>o(t).code=e),label:"回调秒数",onClear:m,style:{width:"105px"}},null,8,["modelValue"]),s("- "),l(c,{modelValue:o(t).name,"onUpdate:modelValue":a[11]||(a[11]=e=>o(t).name=e),style:{width:"105px"}},null,8,["modelValue"])]),_:1})]),_:1}),l(v,null,{default:n(()=>[l(U,null,{default:n(()=>[l(F,{modelValue:o(t).status,"onUpdate:modelValue":a[12]||(a[12]=e=>o(t).status=e),label:"代付状态","tag-type":"success",onClear:m,style:{"margin-right":"5px",width:"200px"},clearable:"","option-props":{label:"name",value:"value"},dataList:i.statusList},null,8,["modelValue","dataList"]),l(r,{modelValue:o(t).agentname,"onUpdate:modelValue":a[13]||(a[13]=e=>o(t).agentname=e),label:"单笔手续费",onClear:m},null,8,["modelValue"]),l(L,{modelValue:o(t).agentname,"onUpdate:modelValue":a[14]||(a[14]=e=>o(t).agentname=e),label:"成功时间",onClear:m},null,8,["modelValue"]),s("至 "),l(N,{modelValue:o(t).agentname,"onUpdate:modelValue":a[15]||(a[15]=e=>o(t).agentname=e),onClear:m},null,8,["modelValue"]),l(w,{type:"primary",onClick:m},{default:n(()=>[s("查询")]),_:1})]),_:1})]),_:1})]),_:1}),l(O,null,{default:n(()=>[l(D,{ref:"baseTableRef",api:"payout.page",params:o(t),indexCode:!0,orderBy:"create_time",dir:"desc"},{default:n(()=>[l(d,{label:"系统订单号",prop:"ordernum"}),l(d,{label:"商户订单号",prop:"merchantordernum"}),l(d,{label:"通道",prop:"aislename"}),l(d,{label:"商户手续费",prop:""},{default:n(e=>[e.row.merchantcost?(V(),f(x,{key:0},{default:n(()=>[s(y(e.row.merchantcost)+"/笔+"+y(e.row.merchantdeal),1)]),_:2},1024)):_("",!0)]),_:1}),l(d,{label:"渠道",prop:"channelname"}),l(d,{label:"渠道订单号",prop:"channelordernum"}),l(d,{label:"渠道手续费",prop:""},{default:n(e=>[e.row.channelcost?(V(),f(x,{key:0},{default:n(()=>[s(y(e.row.channelcost)+"/笔+"+y(e.row.channeldeal),1)]),_:2},1024)):_("",!0)]),_:1}),l(d,{label:"金额",prop:"amount",width:"80"}),l(d,{label:"账户",prop:"accname"}),l(d,{label:"卡号/地址",prop:"accnumer"}),l(d,{label:"银行名称",prop:"bankname"}),l(d,{label:"状态",prop:"statusname"},{default:n(e=>[e.row.statusname?(V(),f(x,{key:0,type:"danger"},{default:n(()=>[s(y(e.row.statusname),1)]),_:2},1024)):_("",!0)]),_:1}),l(d,{label:"创建时间",prop:"create_time"}),l(d,{label:"操作秒数",prop:"backlong",width:"80"}),l(d,{label:"完成时间",prop:"successtime"}),l(d,{label:"回执",prop:"imgurl"},{default:n(e=>[l(j,{style:{width:"50px",height:"50px"},src:e.row.imgurl,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[e.row.imgurl],"initial-index":4,"preview-teleported":"true",fit:"cover"},null,8,["src","preview-src-list"])]),_:1}),l(d,{label:"操作"},{default:n(e=>[e.row.status==50?(V(),f(w,{key:0,type:"primary",link:"",onClick:q=>T(e.row)},{default:n(()=>[s("成功回调")]),_:2},1032,["onClick"])):_("",!0),e.row.status==51?(V(),f(w,{key:1,type:"success",link:"",onClick:q=>i.handleUpdate(e.row)},{default:n(()=>[s("重新发起")]),_:2},1032,["onClick"])):_("",!0)]),_:1})]),_:1},8,["params"])]),_:1}),o(k)==="add"||o(k)==="update"?(V(),f(I,{key:0,modelValue:o(p),"onUpdate:modelValue":a[19]||(a[19]=e=>R(p)?p.value=e:p=e),title:i.dialogTitleObj[o(k)],width:"30%"},{footer:n(()=>[l(w,{onClick:a[18]||(a[18]=e=>R(p)?p.value=!1:p=!1)},{default:n(()=>[s("取 消")]),_:1}),l(w,{type:"primary",onClick:B},{default:n(()=>[s("确 定")]),_:1})]),default:n(()=>[l(A,{ref:"dataFormRef",rules:i.rules,model:o(b),"label-width":"150px"},{default:n(()=>[l($,{label:"上传凭证:",prop:"imgurl"},{default:n(()=>[l(z,{modelValue:o(b).imgurl,"onUpdate:modelValue":a[16]||(a[16]=e=>o(b).imgurl=e)},null,8,["modelValue"])]),_:1}),l($,{label:"备注:",prop:"remark"},{default:n(()=>[l(c,{modelValue:o(b).remark,"onUpdate:modelValue":a[17]||(a[17]=e=>o(b).remark=e),type:"textarea",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])):_("",!0)]),_:1})}}};export{J as default};
