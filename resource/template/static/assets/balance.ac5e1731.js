import{z as M,A as P,u as j,r as L,o as z,e as _,c as B,d as Y,j as F,f as g,w as k,k as p,F as $,N as A,m as N,n as G,p as X,q as J}from"./index.5ac32ff6.js";import{p as K}from"./payconfig.d1d54a7f.js";import{m as Q}from"./merchant.520e94d6.js";import{m as W}from"./merchantaccountorder.ec25300b.js";var H={exports:{}},U={exports:{}};function Z(e){var n;if(e.nodeName==="SELECT")e.focus(),n=e.value;else if(e.nodeName==="INPUT"||e.nodeName==="TEXTAREA"){var t=e.hasAttribute("readonly");t||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),t||e.removeAttribute("readonly"),n=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),f=document.createRange();f.selectNodeContents(e),r.removeAllRanges(),r.addRange(f),n=r.toString()}return n}var ee=Z;(function(e,n){(function(t,r){r(e,ee)})(M,function(t,r){var f=h(r);function h(o){return o&&o.__esModule?o:{default:o}}var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function E(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}var w=function(){function o(i,a){for(var y=0;y<a.length;y++){var v=a[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(i,v.key,v)}}return function(i,a,y){return a&&o(i.prototype,a),y&&o(i,y),i}}(),m=function(){function o(i){E(this,o),this.resolveOptions(i),this.initSelection()}return w(o,[{key:"resolveOptions",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=a.action,this.container=a.container,this.emitter=a.emitter,this.target=a.target,this.text=a.text,this.trigger=a.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var a=this,y=document.documentElement.getAttribute("dir")=="rtl";this.removeFake(),this.fakeHandlerCallback=function(){return a.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[y?"right":"left"]="-9999px";var v=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=v+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,f.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,f.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var a=void 0;try{a=document.execCommand(this.action)}catch{a=!1}this.handleResult(a)}},{key:"handleResult",value:function(a){this.emitter.emit(a?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"copy";if(this._action=a,this._action!=="copy"&&this._action!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(a){if(a!==void 0)if(a&&(typeof a=="undefined"?"undefined":b(a))==="object"&&a.nodeType===1){if(this.action==="copy"&&a.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(this.action==="cut"&&(a.hasAttribute("readonly")||a.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`);this._target=a}else throw new Error('Invalid "target" value, use a valid Element')},get:function(){return this._target}}]),o}();t.exports=m})})(U);var R={exports:{}};function q(){}q.prototype={on:function(e,n,t){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:n,ctx:t}),this},once:function(e,n,t){var r=this;function f(){r.off(e,f),n.apply(t,arguments)}return f._=n,this.on(e,f,t)},emit:function(e){var n=[].slice.call(arguments,1),t=((this.e||(this.e={}))[e]||[]).slice(),r=0,f=t.length;for(r;r<f;r++)t[r].fn.apply(t[r].ctx,n);return this},off:function(e,n){var t=this.e||(this.e={}),r=t[e],f=[];if(r&&n)for(var h=0,b=r.length;h<b;h++)r[h].fn!==n&&r[h].fn._!==n&&f.push(r[h]);return f.length?t[e]=f:delete t[e],this}};R.exports=q;R.exports.TinyEmitter=q;var I={};(function(e){e.node=function(n){return n!==void 0&&n instanceof HTMLElement&&n.nodeType===1},e.nodeList=function(n){var t=Object.prototype.toString.call(n);return n!==void 0&&(t==="[object NodeList]"||t==="[object HTMLCollection]")&&"length"in n&&(n.length===0||e.node(n[0]))},e.string=function(n){return typeof n=="string"||n instanceof String},e.fn=function(n){var t=Object.prototype.toString.call(n);return t==="[object Function]"}})(I);var te=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var x=Element.prototype;x.matches=x.matchesSelector||x.mozMatchesSelector||x.msMatchesSelector||x.oMatchesSelector||x.webkitMatchesSelector}function ne(e,n){for(;e&&e.nodeType!==te;){if(typeof e.matches=="function"&&e.matches(n))return e;e=e.parentNode}}var oe=ne,re=oe;function O(e,n,t,r,f){var h=ie.apply(this,arguments);return e.addEventListener(t,h,f),{destroy:function(){e.removeEventListener(t,h,f)}}}function ae(e,n,t,r,f){return typeof e.addEventListener=="function"?O.apply(null,arguments):typeof t=="function"?O.bind(null,document).apply(null,arguments):(typeof e=="string"&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(h){return O(h,n,t,r,f)}))}function ie(e,n,t,r){return function(f){f.delegateTarget=re(f.target,n),f.delegateTarget&&r.call(e,f)}}var le=ae,C=I,ue=le;function se(e,n,t){if(!e&&!n&&!t)throw new Error("Missing required arguments");if(!C.string(n))throw new TypeError("Second argument must be a String");if(!C.fn(t))throw new TypeError("Third argument must be a Function");if(C.node(e))return ce(e,n,t);if(C.nodeList(e))return fe(e,n,t);if(C.string(e))return de(e,n,t);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function ce(e,n,t){return e.addEventListener(n,t),{destroy:function(){e.removeEventListener(n,t)}}}function fe(e,n,t){return Array.prototype.forEach.call(e,function(r){r.addEventListener(n,t)}),{destroy:function(){Array.prototype.forEach.call(e,function(r){r.removeEventListener(n,t)})}}}function de(e,n,t){return ue(document.body,e,n,t)}var he=se;(function(e,n){(function(t,r){r(e,U.exports,R.exports,he)})(M,function(t,r,f,h){var b=m(r),E=m(f),w=m(h);function m(s){return s&&s.__esModule?s:{default:s}}var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function i(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}var a=function(){function s(l,c){for(var u=0;u<c.length;u++){var d=c[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}return function(l,c,u){return c&&s(l.prototype,c),u&&s(l,u),l}}();function y(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function v(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var V=function(s){v(l,s);function l(c,u){i(this,l);var d=y(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return d.resolveOptions(u),d.listenClick(c),d}return a(l,[{key:"resolveOptions",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof u.action=="function"?u.action:this.defaultAction,this.target=typeof u.target=="function"?u.target:this.defaultTarget,this.text=typeof u.text=="function"?u.text:this.defaultText,this.container=o(u.container)==="object"?u.container:document.body}},{key:"listenClick",value:function(u){var d=this;this.listener=(0,w.default)(u,"click",function(S){return d.onClick(S)})}},{key:"onClick",value:function(u){var d=u.delegateTarget||u.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new b.default({action:this.action(d),target:this.target(d),text:this.text(d),container:this.container,trigger:d,emitter:this})}},{key:"defaultAction",value:function(u){return T("action",u)}},{key:"defaultTarget",value:function(u){var d=T("target",u);if(d)return document.querySelector(d)}},{key:"defaultText",value:function(u){return T("text",u)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],d=typeof u=="string"?[u]:u,S=!!document.queryCommandSupported;return d.forEach(function(D){S=S&&!!document.queryCommandSupported(D)}),S}}]),l}(E.default);function T(s,l){var c="data-clipboard-"+s;if(!!l.hasAttribute(c))return l.getAttribute(c)}t.exports=V})})(H);var me=P(H.exports);const pe={style:{margin:"16px"}},ye=N("\u590D\u5236"),ve={style:{margin:"16px"}},ge=N(" \u63D0\u4EA4 "),be=N("\u52A0\u8F7D\u4E2D..."),we={setup(e){const n=j();let t=L({}),r=L({}),f="http://www.ftyyds.com/esay/rest/v2/file/upload",h=L(!1);z(async()=>{let m=await Q.getdata();console.info(m),t.value.merchantexchange=m.body.downpoint;let o=await K.get();console.info(o),t.value=o.body,t.value={merchantexchange:m.body.downpoint,exchange:o.body.exchange,usdt:o.body.usdt}});function b(){let m=new me("#copy_text");m.on("success",o=>{A({type:"success",message:"\u590D\u5236\u6210\u529F"}),m.destroy()}),m.on("error",o=>{A({type:"danger",message:"\u590D\u5236\u5931\u8D25"}),m.destroy()})}function E(m){let o=new FormData,i={Satoken:G(),Tenant_Id:X()};o.append("file",m.file),J.post(f,o,{"content-type":"multipart/form-data",headers:i}).then(a=>{t.imgurl=a.data.body.url}).catch(a=>{console.info(a)})}async function w(){let m=parseInt(t.value.amount);t.imgurl==null?A({type:"danger",message:"\u8BF7\u4E0A\u4F20\u51ED\u8BC1\u540E\u63D0\u4EA4"}):m<=0?A({type:"danger",message:"\u5145\u503C\u91D1\u989D\u8F93\u5165\u9519\u8BEF"}):(h.value=!0,r={imgurl:t.imgurl,remark:t.value.remark,usdt:t.value.usdt,merchantexchange:t.value.merchantexchange,exchange:t.value.exchange,amount:t.value.amount},(await W.add(r)).code==200?(A({type:"success",message:"\u63D0\u4EA4\u6210\u529F"}),setTimeout(()=>{h.value=!1,n.push({path:"/my"})},1e3)):h.value=!1)}return(m,o)=>{const i=_("van-field"),a=_("van-tag"),y=_("van-uploader"),v=_("van-cell-group"),V=_("van-button"),T=_("van-form"),s=_("van-loading"),l=_("van-overlay");return B(),Y($,null,[F("div",pe,[g(T,{"label-width":"70",onSubmit:w},{default:k(()=>[g(v,{inset:""},{default:k(()=>[g(i,{modelValue:p(t).amount,"onUpdate:modelValue":o[0]||(o[0]=c=>p(t).amount=c),name:"\u5145\u503C\u91D1\u989D",label:"\u5145\u503C\u91D1\u989D",placeholder:"\u5145\u503C\u91D1\u989D",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5145\u503C\u91D1\u989D"}],required:""},null,8,["modelValue"]),g(i,{modelValue:p(t).exchange,"onUpdate:modelValue":o[1]||(o[1]=c=>p(t).exchange=c),name:"\u5145\u503C\u6C47\u7387",label:"\u5145\u503C\u6C47\u7387",placeholder:"\u5145\u503C\u6C47\u7387",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5145\u503C\u6C47\u7387"}],readonly:"",required:""},null,8,["modelValue"]),g(i,{modelValue:p(t).merchantexchange,"onUpdate:modelValue":o[2]||(o[2]=c=>p(t).merchantexchange=c),name:"\u6C47\u7387\u6D6E\u52A8",label:"\u6C47\u7387\u6D6E\u52A8",placeholder:"\u6C47\u7387\u6D6E\u52A8",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u6C47\u7387\u6D6E\u52A8"}],readonly:"",required:""},null,8,["modelValue"]),g(i,{modelValue:p(t).usdt,"onUpdate:modelValue":o[3]||(o[3]=c=>p(t).usdt=c),label:"TRC20",placeholder:"\u7F51\u7EDCTRC20",rows:"3",type:"textarea",readonly:"",required:""},{button:k(()=>[g(a,{plain:"",type:"primary",ref_key:"copy",ref:b,"data-clipboard-text":p(t).usdt,onClick:b,id:"copy_text"},{default:k(()=>[ye]),_:1},8,["data-clipboard-text"])]),_:1},8,["modelValue"]),g(i,{name:"uploader",label:"\u652F\u4ED8\u51ED\u8BC1",required:""},{input:k(()=>[g(y,{"max-count":1,"after-read":E,modelValue:p(t).imgurl,"onUpdate:modelValue":o[4]||(o[4]=c=>p(t).imgurl=c)},null,8,["modelValue"])]),_:1}),g(i,{modelValue:p(t).remark,"onUpdate:modelValue":o[5]||(o[5]=c=>p(t).remark=c),name:"\u5907\u6CE8",label:"\u5907\u6CE8",placeholder:"\u5907\u6CE8"},null,8,["modelValue"])]),_:1}),F("div",ve,[g(V,{block:"",type:"primary","native-type":"submit"},{default:k(()=>[ge]),_:1})])]),_:1})]),g(l,{show:p(h)},{default:k(()=>[g(s,{size:"24px",vertical:""},{default:k(()=>[be]),_:1})]),_:1},8,["show"])],64)}}};export{we as default};
